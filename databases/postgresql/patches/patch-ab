$NetBSD: patch-ab,v 1.8 2000/03/18 17:43:17 jlam Exp $

--- Makefile.shlib.orig	Fri Jul 30 00:13:44 1999
+++ Makefile.shlib	Thu Mar 16 17:49:44 2000
@@ -109,6 +109,24 @@
   endif
 endif
 
+ifeq ($(PORTNAME), netbsd)
+  ifdef BSD_SHLIB
+    install-shlib-dep  := install-shlib
+    soname             := lib$(NAME)$(DLSUFFIX).$(SO_MAJOR_VERSION)
+    shlib              := lib$(NAME)$(DLSUFFIX).$(SO_MAJOR_VERSION).$(SO_MINOR_VERSION)
+    ifdef ELF_SYSTEM
+      LD               := $(CC)
+      LDFLAGS_SL       := -shared -Wl,-soname -Wl,$(soname)
+      ifneq ($(SHLIB_LINK),)
+        LDFLAGS_SL     += -Wl,-R$(LIBDIR)
+      endif
+    else
+      LDFLAGS_SL       := -x -Bshareable -Bforcearchive
+    endif
+    CFLAGS             += $(CFLAGS_SL)
+  endif
+endif
+
 ifeq ($(PORTNAME), hpux)
   install-shlib-dep	:= install-shlib
 # HPUX doesn't believe in version numbers for shlibs
