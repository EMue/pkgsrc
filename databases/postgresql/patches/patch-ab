$NetBSD: patch-ab,v 1.5 1999/01/04 13:05:01 frueauf Exp $

--- backend/storage/buffer/s_lock.c.orig	Fri Sep 18 19:18:39 1998
+++ backend/storage/buffer/s_lock.c	Tue Dec 29 00:50:38 1998
@@ -117,6 +117,25 @@
 
 #endif	 /* PPC */
 
+#if defined(__m68k__)
+static void
+tas_dummy()	/* really means: extern int tas(slock_t **lock); */
+{
+	__asm__("		\n\
+.global		_tas		\n\
+_tas:				\n\
+	movel   sp@(0x4),a0	\n\
+	tas a0@			\n\
+	beq _success		\n\
+	moveq   #-128,d0	\n\
+	rts			\n\
+_success:			\n\
+	moveq   #0,d0		\n\
+	rts			\n\
+	");
+}
+
+#endif	 /* __m68k__ */
 
 
 #else							/* defined(__GNUC__) */
