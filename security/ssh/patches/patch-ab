$NetBSD: patch-ab,v 1.6 1999/05/10 21:34:46 tron Exp $

--- configure.in.orig	Mon May 10 23:27:44 1999
+++ configure.in	Mon May 10 23:27:53 1999
@@ -317,9 +317,9 @@
 
 export CFLAGS CC
 
-# Socket pairs appear to be broken on several systems.  I don't know exactly
-# where, so I'll use pipes everywhere for now.
-AC_DEFINE(USE_PIPES)
+dnl # Socket pairs appear to be broken on several systems.  I don't know exactly
+dnl # where, so I'll use pipes everywhere for now.
+dnl AC_DEFINE(USE_PIPES)
 
 AC_MSG_CHECKING([that the compiler works])
 AC_TRY_RUN([ main(int ac, char **av) { return 0; } ],
@@ -909,8 +909,8 @@
     fi
     AC_MSG_RESULT(Assuming TIS headers and libraries are in $withval.)
     AC_DEFINE(HAVE_TIS)
-    CFLAGS="$CFLAGS -I$withval -DHAVE_TIS"
-    LIBS="-L$withval -lauth -lfwall $LIBS"
+    CFLAGS="$CFLAGS -I$withval/include -DHAVE_TIS"
+    LIBS="-L$withval/lib -lauth -lfwall $LIBS"
     AC_MSG_WARN(Remember to read README.TIS. The connection between sshd and TIS authentication
 server is clear text!)
     ;;
@@ -1236,14 +1236,14 @@
 [ case "$enableval" in
   no)
        AC_MSG_RESULT(no)
-       SSHINSTALLMODE=0711
+       SSHINSTALLMODE=0511
        ;;
   *)   AC_MSG_RESULT(yes)
-       SSHINSTALLMODE=04711
+       SSHINSTALLMODE=04511
        ;;
   esac ],
   AC_MSG_RESULT(yes)
-  SSHINSTALLMODE=04711
+  SSHINSTALLMODE=04511
 )
 
 AC_MSG_CHECKING(whether to enable TCP_NODELAY)
@@ -1345,4 +1345,4 @@
 AC_SUBST(SSHDCONFOBJS)
 AC_SUBST(SSHINSTALLMODE)
 
-AC_OUTPUT(Makefile sshd.8 ssh.1 make-ssh-known-hosts.1 zlib-1.0.4/Makefile)
+AC_OUTPUT(Makefile sshd.8 ssh.1 make-ssh-known-hosts.pl make-ssh-known-hosts.1 zlib-1.0.4/Makefile)
