$NetBSD: patch-ab,v 1.4 2001/01/22 13:30:36 martin Exp $

--- configure.in.orig	Thu Dec 21 19:12:46 2000
+++ configure.in	Mon Jan 22 14:14:10 2001
@@ -134,12 +134,14 @@
 
 dnl Check for libwrap library.
 AC_MSG_CHECKING([for hosts_access in -lwrap])
+wrap_LIB=
 saved_LIBS="$LIBS"
 LIBS="-lwrap $saved_LIBS"
 AC_TRY_LINK([int hosts_access(); int allow_severity, deny_severity;],
 [hosts_access()],
-[AC_MSG_RESULT(yes); AC_DEFINE(HAVE_LIBWRAP)],
-[AC_MSG_RESULT(no)]; LIBS="$saved_LIBS")
+[AC_MSG_RESULT(yes); AC_DEFINE(HAVE_LIBWRAP) wrap_LIB="-lwrap"],
+[AC_MSG_RESULT(no)])
+LIBS="$saved_LIBS"
 
 dnl Add SSL includes and libraries
 CFLAGS="$CFLAGS -I$ssldir/include"
@@ -161,7 +163,7 @@
 # AC_HEADER_DIRENT
 # AC_HEADER_STDC
 # AC_HEADER_SYS_WAIT
-AC_CHECK_HEADERS(getopt.h unistd.h sys/select.h tcpd.h pthread.h pty.h stropts.h)
+AC_CHECK_HEADERS(getopt.h unistd.h sys/select.h tcpd.h pthread.h util.h sys/ioctl.h pty.h stropts.h)
 
 # dnl Checks for typedefs, structures, and compiler characteristics.
 # AC_C_CONST
@@ -179,6 +181,8 @@
 AC_CHECK_SIZEOF(unsigned int)
 AC_CHECK_SIZEOF(unsigned long)
 AC_CHECK_SIZEOF(unsigned long long)
+
+LIBS="$LIBS $wrap_LIB"
 
 AC_OUTPUT(Makefile)
 
