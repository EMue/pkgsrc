$NetBSD: patch-aa,v 1.5 2000/03/26 14:36:24 itojun Exp $
--- configure.orig	Wed Jan 26 19:17:06 2000
+++ configure	Thu Jan 27 11:26:51 2000
@@ -2293,9 +2293,11 @@
 
 		#include <sys/types.h>
 		#include <sys/socket.h>
+		#include <string.h>
 	
 int main() {
 struct sockaddr_storage s;
+memset(&s, 0, sizeof(s));
 ; return 0; }
 EOF
 if { (eval echo configure:2302: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
@@ -2321,6 +2323,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2323 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
 int main() {
 struct sockaddr_in6 s; s.sin6_family = 0;
@@ -2349,6 +2352,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2351 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
 int main() {
 struct in6_addr s; s.s6_addr[0] = 0;
@@ -2545,7 +2549,7 @@
   if test "$cross_compiling" = yes; then
     { echo "configure: error: Cannot check for file existence when cross compiling" 1>&2; exit 1; }
 else
-  if test -r "/dev/urandom"; then
+  if test -r "/dev/urandom" && dd if=/dev/urandom of=/dev/null bs=1 count=1; then
     eval "ac_cv_file_$ac_safe=yes"
   else
     eval "ac_cv_file_$ac_safe=no"
