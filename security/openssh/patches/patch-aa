$NetBSD: patch-aa,v 1.6 2000/03/27 00:01:17 fredb Exp $

--- configure.orig	Thu Mar 23 16:28:48 2000
+++ configure	Sun Mar 26 17:32:51 2000
@@ -2427,9 +2427,11 @@
 
 		#include <sys/types.h>
 		#include <sys/socket.h>
+		#include <string.h>
 	
 int main() {
 struct sockaddr_storage s;
+memset(&s, 0, sizeof(s));
 ; return 0; }
 EOF
 if { (eval echo configure:2436: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
@@ -2455,6 +2457,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2457 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
 int main() {
 struct sockaddr_in6 s; s.sin6_family = 0;
@@ -2483,6 +2486,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2485 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
 int main() {
 struct in6_addr s; s.s6_addr[0] = 0;
@@ -3149,7 +3153,7 @@
   if test "$cross_compiling" = yes; then
     { echo "configure: error: Cannot check for file existence when cross compiling" 1>&2; exit 1; }
 else
-  if test -r "/dev/urandom"; then
+  if test -r "/dev/urandom" && dd if=/dev/urandom of=/dev/null bs=1 count=1; then
     eval "ac_cv_file_$ac_safe=yes"
   else
     eval "ac_cv_file_$ac_safe=no"
