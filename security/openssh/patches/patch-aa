$NetBSD: patch-aa,v 1.2 2000/01/17 07:24:40 christos Exp $

--- configure.orig	Sat Jan 15 20:22:59 2000
+++ configure	Mon Jan 17 02:21:54 2000
@@ -1293,7 +1293,7 @@
 
 echo $ac_n "checking for OpenSSL/SSLeay directory""... $ac_c" 1>&6
 echo "configure:1296: checking for OpenSSL/SSLeay directory" >&5
-for ssldir in /usr /usr/local/openssl /usr/lib/openssl /usr/local/ssl /usr/lib/ssl /usr/local $prefix /usr/pkg ; do
+for ssldir in $prefix /usr /usr/local/openssl /usr/lib/openssl /usr/local/ssl /usr/lib/ssl /usr/local /usr/pkg ; do
 	if test -f "$ssldir/include/openssl/crypto.h"; then
 		cat >> confdefs.h <<\EOF
 #define HAVE_OPENSSL 1
@@ -1321,7 +1321,7 @@
 
 if test "$ssldir" != "/usr"; then
 	CFLAGS="$CFLAGS -I$ssldir/include"
-	LDFLAGS="$LDFLAGS -L$ssldir/lib"
+	LDFLAGS="$LDFLAGS -L$ssldir/lib -R$ssldir/lib"
 fi
 echo "$ac_t""$ssldir" 1>&6
 
@@ -2224,6 +2224,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2226 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <sys/socket.h>
 int main() {
 struct sockaddr_storage s;
@@ -2252,6 +2253,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2254 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
 int main() {
 struct sockaddr_in6 s; s.sin6_family = 0;
@@ -2280,6 +2282,7 @@
 cat > conftest.$ac_ext <<EOF
 #line 2282 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
 int main() {
 struct in6_addr s; s.s6_addr[0] = 0;
@@ -2309,6 +2312,7 @@
 #line 2310 "configure"
 #include "confdefs.h"
 
+		#include <sys/types.h>
 		#include <sys/socket.h>
 		#include <netdb.h>
 	
