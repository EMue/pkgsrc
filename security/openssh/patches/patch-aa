$NetBSD: patch-aa,v 1.3 2000/01/27 17:12:03 hubertf Exp $

--- configure.orig	Thu Jan 27 04:17:06 2000
+++ configure	Thu Jan 27 17:02:44 2000
@@ -1271,7 +1271,7 @@
 
 if test "$ssldir" != "/usr"; then
 	CFLAGS="$CFLAGS -I$ssldir/include"
-	LDFLAGS="$LDFLAGS -L$ssldir/lib"
+	LDFLAGS="$LDFLAGS -L$ssldir/lib -R$ssldir/lib"
 fi
 echo "$ac_t""$ssldir" 1>&6
 
@@ -2321,7 +2321,9 @@
 cat > conftest.$ac_ext <<EOF
 #line 2323 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
+#include <netinet/in6.h>
 int main() {
 struct sockaddr_in6 s; s.sin6_family = 0;
 ; return 0; }
@@ -2349,7 +2351,9 @@
 cat > conftest.$ac_ext <<EOF
 #line 2351 "configure"
 #include "confdefs.h"
+#include <sys/types.h>
 #include <netinet/in.h>
+#include <netinet/in6.h>
 int main() {
 struct in6_addr s; s.s6_addr[0] = 0;
 ; return 0; }
@@ -2545,7 +2549,7 @@
   if test "$cross_compiling" = yes; then
     { echo "configure: error: Cannot check for file existence when cross compiling" 1>&2; exit 1; }
 else
-  if test -r "/dev/urandom"; then
+  if test -r "/dev/urandom" && dd if=/dev/urandom of=/dev/null bs=1 count=1; then
     eval "ac_cv_file_$ac_safe=yes"
   else
     eval "ac_cv_file_$ac_safe=no"
