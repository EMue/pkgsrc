# $NetBSD: Makefile,v 1.35 1999/09/15 18:44:15 tron Exp $
# FreeBSD Id: Makefile,v 1.3 1997/11/05 04:19:54 asami Exp
#

DISTNAME=		kdenetwork-1.1.2
CATEGORIES=		net kde
MASTER_SITES=		ftp://ftp.us.kde.org/pub/kde/stable/1.1.2/distribution/tar/generic/source/bz2/ \
			ftp://ftp.de.kde.org/pub/kde/stable/1.1.2/distribution/tar/generic/source/bz2/
EXTRACT_SUFX=		.tar.bz2

MAINTAINER=		tron@netbsd.org
HOMEPAGE=		http://www.kde.org/

DEPENDS=		gdbm-1.7.3:../../databases/gdbm \
			uulib-0.5.13:../../converters/uulib \
			kdesupport-1.1.2:../../converters/kdesupport \
			kdebase-1.1.2:../../x11/kdebase

NOT_FOR_PLATFORM=	*-*-alpha	# LP64/ELF problems

USE_X11BASE=		yes
USE_GMAKE=		yes
USE_LIBTOOL=		yes
LIBTOOL_FLAGS=		--cplusplus --install-la
GNU_CONFIGURE=		yes
CONFIGURE_ARGS=		"--datadir=${PREFIX}/share/kde" \
			"--with-qt-dir=${PREFIX}" \
			"--with-qt-includes=${PREFIX}/include/qt"
CPPFLAGS+=		-I${LOCALBASE}/include
CFLAGS+=		-I${LOCALBASE}/include
CONFIGURE_ENV=  	KDEDIR=${PREFIX} \
			CPPFLAGS="${CPPFLAGS}" \
			CXXFLAGS="${CFLAGS}" \
			all_libraries="-L${LOCALBASE}/lib -Wl,-R${LOCALBASE}/lib"

GCC_VERSION!=   	gcc --version
.if (${GCC_VERSION:C/-.*$$//} == egcs)
PLIST_SRC=		${PKGDIR}/PLIST.egcs
.else
PLIST_SRC=		${PKGDIR}/PLIST.gcc
.endif

post-install:
.if (${GCC_VERSION:C/-.*$$//} != egcs)
	@find ${PREFIX}/share/kde/locale -name ksirc.mo | xargs ${RM}
.endif

.include "../../mk/bsd.pkg.mk"
