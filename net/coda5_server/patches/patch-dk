$NetBSD: patch-dk,v 1.1 1999/04/28 23:56:34 rvb Exp $

diff -u /usr/pkgsrc/net/coda-5.2.2/coda-src/venus/venusvm.cc ./coda-src/venus/venusvm.cc
--- /usr/pkgsrc/net/coda-5.2.2/coda-src/venus/venusvm.cc	Mon Apr 19 20:03:06 1999
+++ ./coda-src/venus/venusvm.cc	Wed Apr 28 13:01:27 1999
@@ -293,7 +293,13 @@
     struct hostent *h = gethostbyname(VmonHost);
     if (h) VmonAddr = ntohl(*((unsigned long *)h->h_addr));
 
-    MyVenusId.IPAddress = myHostId;
+#ifdef DJGPP
+    /* this needs MYHOST in the cwd, but vmon is normally not enabled... */
+    MyVenusId.IPAddress = __djgpp_get_my_host();
+#else
+    MyVenusId.IPAddress = gethostid();
+#endif
+
     MyVenusId.BirthTime = Vtime();
 
     CEActiveList = new olist;
