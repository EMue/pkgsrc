$NetBSD: patch-aa,v 1.5 1998/08/09 16:14:08 kim Exp $

--- Makefile.orig	Mon Jun  1 02:29:04 1998
+++ Makefile	Sun Aug  2 14:52:27 1998
@@ -5,11 +5,11 @@
 ###########################################################################
 
 # The base directory for all samba files
-BASEDIR = /usr/local/samba
+BASEDIR = $(PREFIX)
 
 # The base manpages directory to put the man pages in
 # Note: $(MANDIR)/man1, $(MANDIR)/man5 and $(MANDIR)/man8 must exist.
-MANDIR = /usr/local/man
+MANDIR = $(PREFIX)/man
 
 # The directories to put things in. If you use multiple
 # architectures or share the samba binaries across NFS then
@@ -18,9 +18,11 @@
 #       normally only applies to nmbd and smbd
 #       SBINDIR implies a secure binary directory
 BINDIR = $(BASEDIR)/bin
-SBINDIR = $(BASEDIR)/bin
+SBINDIR = $(BASEDIR)/sbin
 LIBDIR = $(BASEDIR)/lib
-VARDIR = $(BASEDIR)/var
+ETCDIR?= $(BASEDIR)/etc
+LOGDIR = /var/log
+PRIVDIR?= $(BASEDIR)/private
 
 # The permissions to give the executables
 INSTALLPERMS = 0755
@@ -45,17 +47,17 @@
 # set these to where to find various files
 # These can be overridden by command line switches (see smbd(8))
 # or in smb.conf (see smb.conf(5))
-SMBLOGFILE = $(VARDIR)/log.smb
-NMBLOGFILE = $(VARDIR)/log.nmb
-CONFIGFILE = $(LIBDIR)/smb.conf
-LMHOSTSFILE = $(LIBDIR)/lmhosts
-DRIVERFILE = $(LIBDIR)/printers.def
+SMBLOGFILE = $(LOGDIR)/smb
+NMBLOGFILE = $(LOGDIR)/nmb
+CONFIGFILE = $(ETCDIR)/smb.conf
+LMHOSTSFILE = $(ETCDIR)/lmhosts
+DRIVERFILE = $(ETCDIR)/printers.def
 SMB_PASSWD = $(BINDIR)/smbpasswd
-SMB_PASSWD_FILE = $(BASEDIR)/private/smbpasswd
+SMB_PASSWD_FILE = $(PRIVDIR)/smbpasswd
 WEB_ROOT = $(BASEDIR)
 
 # the directory where lock files go
-LOCKDIR = $(VARDIR)/locks
+LOCKDIR = /var/spool/locks
 
 # The directory where code page definition files go
 CODEPAGEDIR = $(LIBDIR)/codepages
@@ -352,10 +354,10 @@
 # LIBSM =   
 
 
-# This is for NetBSD. Add -DNETBSD_1_0 if you are using 1.0
+# This is for NetBSD
 # contributed by noses@oink.rhein.de
-# FLAGSM = -DNETBSD -DSHADOW_PWD
-# LIBSM = -lcrypt 
+FLAGSM = -DFAST_SHARE_MODES
+LIBSM = -lcrypt 
 
 # This is for NetBSD 1.3  
 # contributed by sean@fuzzymagic.com  
@@ -824,8 +826,8 @@
 install: installbin installman installscripts installcp
 
 installbin: all
-	@$(SHELL) $(srcdir)installbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(LIBDIR) $(VARDIR) $(SPROGS)
-	@$(SHELL) $(srcdir)installbin.sh $(INSTALLPERMS) $(BASEDIR) $(BINDIR) $(LIBDIR) $(VARDIR) $(PROGS)
+	@$(SHELL) $(srcdir)installbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(ETCDIR) $(LOGDIR) $(SPROGS)
+	@$(SHELL) $(srcdir)installbin.sh $(INSTALLPERMS) $(BASEDIR) $(BINDIR) $(ETCDIR) $(LOGDIR) $(PROGS)
 
 installscripts:
 	@$(SHELL) $(srcdir)installscripts.sh $(INSTALLPERMS) $(BINDIR) $(SCRIPTS)
@@ -847,8 +849,8 @@
 	@$(SHELL) $(srcdir)uninstallman.sh $(MANDIR) $(srcdir)
 
 uninstallbin:
-	@$(SHELL) $(srcdir)uninstallbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(LIBDIR) $(VARDIR) $(SPROGS)
-	@$(SHELL) $(srcdir)uninstallbin.sh $(INSTALLPERMS) $(BASEDIR) $(BINDIR) $(LIBDIR) $(VARDIR) $(PROGS)
+	@$(SHELL) $(srcdir)uninstallbin.sh $(INSTALLPERMS) $(BASEDIR) $(SBINDIR) $(ETCDIR) $(LOGDIR) $(SPROGS)
+	@$(SHELL) $(srcdir)uninstallbin.sh $(INSTALLPERMS) $(BASEDIR) $(BINDIR) $(ETCDIR) $(LOGDIR) $(PROGS)
 
 uninstallscripts:
 	@$(SHELL) $(srcdir)uninstallscripts.sh $(INSTALLPERMS) $(BINDIR) $(SCRIPTS)
