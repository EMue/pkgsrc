$NetBSD: patch-aa,v 1.14 2001/05/14 18:56:16 jlam Exp $

--- configure.in.orig	Tue Apr 17 01:44:30 2001
+++ configure.in
@@ -392,9 +392,6 @@
 AC_CHECK_TYPE(ssize_t, int)
 AC_CHECK_TYPE(wchar_t, unsigned short)
 
-# we need libcups for CUPS support...
-AC_CHECK_LIB(cups,httpConnect)
-
 # we need libdl for PAM and the new VFS code
 AC_CHECK_LIB(dl, dlopen, [LIBS="$LIBS -ldl";
 	AC_DEFINE(HAVE_LIBDL)])
@@ -1459,6 +1456,24 @@
     AC_DEFINE(BROKEN_NISPLUS_INCLUDE_FILES)
 fi
 
+
+################################################
+# check for CUPS support
+AC_MSG_CHECKING(whether to use CUPS)
+AC_ARG_WITH(cups,
+[  --with-cups    Include CUPS support
+  --without-cups Don't include CUPS support (default)],
+[ case "$withval" in
+  yes)
+    AC_MSG_RESULT(yes)
+    AC_CHECK_LIB(cups, httpConnect)
+    ;;
+  *)
+    AC_MSG_RESULT(no)
+    ;;
+  esac ],
+  AC_MSG_RESULT(no)
+)
 
 #################################################
 # check for smbwrapper support
