$NetBSD: patch-ae,v 1.1 2000/01/31 23:00:49 mrg Exp $

Index: source/edit.c
===================================================================
RCS file: /home/cvs/ircii/source/edit.c,v
retrieving revision 1.119
retrieving revision 1.120
diff -p -u -r1.119 -r1.120
--- edit.c	1999/12/18 13:12:00	1.119
+++ edit.c	2000/01/30 21:07:47	1.120
@@ -1285,6 +1285,21 @@ whois(command, args, subargs)
 		*args,
 		*subargs;
 {
+	if (get_server_version(from_server) == ServerICB)
+	{
+		int	display;
+		char	*buf;
+
+		display = window_display;
+		window_display = 0;
+		buf = new_malloc(5 + 1 + strlen(args) + 1);
+		sprintf(buf, "whereis %s", args);
+		icb_put_msg2("server", buf);
+		new_free(&buf);
+		window_display = display;
+		return;
+	}
+
 	if (args && *args)
 		send_to_server("%s %s", command, args);
 	else /* Default to yourself  -lynx */
