$NetBSD: patch-ae,v 1.3 1998/11/05 00:24:38 mycroft Exp $

--- syscall.c.orig	Tue May 26 10:43:43 1998
+++ syscall.c	Wed Nov  4 19:11:19 1998
@@ -103,12 +103,21 @@
 	return mkdir(fname, mode);
 }
 
+#ifdef HAVE_MKSTEMP
+int do_mkstemp(char *template)
+{
+	if (dry_run) return -1;
+	if (read_only) {errno = EROFS; return -1;}
+	return mkstemp(template);
+}
+#else
 char *do_mktemp(char *template)
 {
 	if (dry_run) return NULL;
 	if (read_only) {errno = EROFS; return NULL;}
 	return mktemp(template);
 }
+#endif
 
 int do_stat(const char *fname, STRUCT_STAT *st)
 {
