--- makefile.orig	Wed Mar 18 19:54:27 1998
+++ makefile	Fri Jul 24 02:18:44 1998
@@ -14,2 +14,3 @@
 
+INSTALLROOT=$(PREFIX)
 
@@ -25,3 +26,3 @@
 
-XLIB=-lX11
+#XLIB=-lX11
 
@@ -38,4 +39,4 @@
 
-# XLIB=-L /usr/X11R6/lib -lX11 -lcompat
-# CFLAGS=-I/usr/X11/include
+XLIB= -R$(INSTALLROOT)/lib -L$(INSTALLROOT)/lib -lX11 #-lcompat
+CFLAGS=-I$(INSTALLROOT)/include
 
@@ -54,5 +55,7 @@
 
+install:
+	install -g bin -o bin -m 0755 icbm3d $(INSTALLROOT)/bin
 
-OBJECTS=icbm3d.o window.o connect.o hints.o visual.o gc.o color.o randnum.o \
-	text.o
+SRCS= icbm3d.c window.c connect.c hints.c visual.c gc.o color.c randnum.c text.c
+OBJS= ${SRCS:.c=.o}
 
@@ -60,4 +63,4 @@
 
-icbm3d:	$(OBJECTS)
-	$(CC) $(OBJECTS) $(XLIB) $(MATHLIB) $(CFLAGS) -o icbm3d
+icbm3d:	$(OBJS)
+	$(CC) $(OBJECTS) $(XLIB) $(MATHLIB) $(CFLAGS) -o $@ $(OBJS)
 	chmod 755 icbm3d
@@ -66,3 +69,3 @@
 
-# Application objects:
+#dependencies
 
@@ -70,28 +73,9 @@
 		randnum.h text.h
-
-
-# Library objects:
-
 window.o:	window.c window.h
-	$(CC)	window.c -c
-
 connect.o:	connect.c connect.h
-	$(CC)	connect.c -c
-
 hints.o:	hints.c hints.h
-	$(CC)	hints.c -c
-
 visual.o:	visual.c visual.h
-	$(CC)	visual.c -c
-
-gc.o:	gc.c gc.h
-	$(CC)	gc.c -c
-
+gc.o:		gc.c gc.h
 color.o:	color.c color.h
-	$(CC)	color.c -c
-
 randnum.o:	randnum.c randnum.h
-	$(CC)	randnum.c -c
-
-text.o:	text.c text.h
-	$(CC)	text.c -c
+text.o:		text.c text.h
