$NetBSD: patch-ab,v 1.2 2000/08/04 02:00:47 jlam Exp $

--- src/js/js.h.orig	Sat Oct 16 17:08:01 1999
+++ src/js/js.h	Thu Aug  3 21:42:03 2000
@@ -29,7 +29,8 @@
 #  include <unistd.h>
 #  include <fcntl.h>
 
-#  ifdef __FreeBSD__
+#  if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
 #    include <machine/joystick.h>
 #    define JS_DATA_TYPE joystick
 #    define JS_RETURN (sizeof(struct JS_DATA_TYPE))
@@ -76,7 +77,8 @@
 #ifdef WIN32
 #  define _JS_MAX_AXES 6
 #else
-#  ifdef __FreeBSD__
+#  if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
 #  define _JS_MAX_AXES 2
 #  else
 #  define _JS_MAX_AXES 6
@@ -85,7 +87,8 @@
 
 class jsJoystick
 {
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
   int          id ;
 #endif
 #ifdef WIN32
@@ -153,7 +156,8 @@
     }
 
 #else
-#  ifdef __FreeBSD__
+#  if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
     FILE *joyfile;
     char joyfname[1024];
     int noargs, in_no_axes;
@@ -178,7 +182,8 @@
     if ( error )
       return ;
 
-#  ifdef __FreeBSD__
+#  if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
 
     float axes[_JS_MAX_AXES];
     int buttons[_JS_MAX_AXES];
@@ -316,7 +321,8 @@
       default :    num_axes = 0 ; setError () ; break ;
     }
 #else
-#  ifdef __FreeBSD__
+#  if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
     id = ident;
     sprintf ( fname, "/dev/joy%d", ident ) ;
 #  else
@@ -467,7 +473,8 @@
     }
 
     if ( buttons )
-#  ifdef __FreeBSD__
+#  if defined(__FreeBSD__) || \
+	(defined(__NetBSD__) && defined(MACHINE_JOYSTICK_IS_PRESENT))
       *buttons = ( js.b1 ? 1 : 0 ) | ( js.b2 ? 2 : 0 ) ;
 #  else
       *buttons = js.buttons ;
