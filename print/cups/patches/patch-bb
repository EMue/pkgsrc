$NetBSD: patch-bb,v 1.3 2000/12/14 17:04:45 jlam Exp $

--- configure.in.orig	Wed Sep 20 15:11:05 2000
+++ configure.in
@@ -44,8 +44,11 @@
 CXXFLAGS="${CXXFLAGS:=}"
 
-AC_ARG_ENABLE(debug, [  --enable-debug        turn on debugging [default=no]],[if eval "test x$enable_debug = xyes"; then
+AC_ARG_ENABLE(rootconfig, [  --enable-rootconfig
+                          set root of CUPS configuration to root directory
+                          [default=no]])
+AC_ARG_ENABLE(debug, [  --enable-debug          turn on debugging [default=no]],[if eval "test x$enable_debug = xyes"; then
 	OPTIM="-g "
 fi])
-AC_ARG_ENABLE(shared, [  --enable-shared        turn on shared libraries [default=yes]])
+AC_ARG_ENABLE(shared, [  --enable-shared         turn on shared libraries [default=yes]])
 AC_ARG_ENABLE(libtool_unsupported, [  --enable-libtool-unsupported=LIBTOOL_PATH
                           turn on building with libtool (UNSUPPORTED!) [default=no]],[if eval "test x$enable_libtool_unsupported != xno"; then
@@ -116,4 +119,12 @@
 AC_ARG_WITH(fontpath, [  --with-fontpath     set font path for pstoraster],fontpath="$withval",fontpath="")
 
+AC_ARG_WITH(cups-user, [  --with-cups-user=USERID
+                          use USERID as cups userid [default=lp]], CUPS_USER="$withval", CUPS_USER="lp")
+AC_ARG_WITH(cups-group, [  --with-cups-group=GROUPID
+                          use GROUPID as cups group [default=sys]], CUPS_GROUP="$withval", CUPS_GROUP="sys")
+
+AC_SUBST(CUPS_USER)
+AC_SUBST(CUPS_GROUP)
+
 dnl Checks for programs...
 AC_PROG_AWK
@@ -485,6 +496,14 @@
 	esac
 else
-	INITDIR="/etc"
-	INITDDIR="../init.d"
+	case "$uname" in
+		FreeBSD* | NetBSD* | OpenBSD*)
+			INITDIR=""
+			INITDDIR=""
+			;;
+		*)
+			INITDIR="/etc"
+			INITDDIR="../init.d"
+			;;
+	esac
 fi
 
@@ -493,11 +512,21 @@
 
 dnl Setup default locations...
-CUPS_SERVERROOT='${prefix}/etc/cups'
-CUPS_LOGDIR='${prefix}/var/log/cups'
-CUPS_REQUESTS='${prefix}/var/spool/cups'
-
-AC_DEFINE_UNQUOTED(CUPS_SERVERROOT, "$prefix/etc/cups")
-AC_DEFINE_UNQUOTED(CUPS_LOGDIR, "$prefix/var/log/cups")
-AC_DEFINE_UNQUOTED(CUPS_REQUESTS, "$prefix/var/spool/cups")
+if test "$enable_rootconfig" = "yes"; then
+	CUPS_SERVERROOT='/etc/cups'
+	CUPS_LOGDIR='/var/log/cups'
+	CUPS_REQUESTS='/var/spool/cups'
+
+	AC_DEFINE_UNQUOTED(CUPS_SERVERROOT, "/etc/cups")
+	AC_DEFINE_UNQUOTED(CUPS_LOGDIR, "/var/log/cups")
+	AC_DEFINE_UNQUOTED(CUPS_REQUESTS, "/var/spool/cups")
+else
+	CUPS_SERVERROOT='${prefix}/etc/cups'
+	CUPS_LOGDIR='${prefix}/var/log/cups'
+	CUPS_REQUESTS='${prefix}/var/spool/cups'
+
+	AC_DEFINE_UNQUOTED(CUPS_SERVERROOT, "$prefix/etc/cups")
+	AC_DEFINE_UNQUOTED(CUPS_LOGDIR, "$prefix/var/log/cups")
+	AC_DEFINE_UNQUOTED(CUPS_REQUESTS, "$prefix/var/spool/cups")
+fi
 
 dnl See what directory to put server executables...
@@ -550,6 +579,6 @@
 
 dnl Set the CUPS_DOCROOT directory...
-CUPS_DOCROOT='${exec_prefix}/share/doc/cups'
-AC_DEFINE_UNQUOTED(CUPS_DOCROOT, "$exec_prefix/share/doc/cups")
+CUPS_DOCROOT='${exec_prefix}/share/doc/html/cups'
+AC_DEFINE_UNQUOTED(CUPS_DOCROOT, "$exec_prefix/share/doc/html/cups")
 AC_SUBST(CUPS_DOCROOT)
 
@@ -557,5 +586,5 @@
 AC_DEFINE_UNQUOTED(CUPS_FONTPATH, "$fontpath")
 
-AC_OUTPUT(Makedefs cups.sh)
+AC_OUTPUT(Makedefs cups.sh conf/cupsd.conf)
 
 dnl
