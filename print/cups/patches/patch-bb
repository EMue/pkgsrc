$NetBSD: patch-bb,v 1.2 2000/12/07 20:33:06 jlam Exp $

--- configure.in.orig	Wed Sep 20 15:11:05 2000
+++ configure.in
@@ -43,6 +43,9 @@
 CFLAGS="${CFLAGS:=}"
 CXXFLAGS="${CXXFLAGS:=}"
 
+AC_ARG_ENABLE(rootconfig, [  --enable-rootconfig
+                          set root of CUPS configuration to root directory
+                          [default=no]])
 AC_ARG_ENABLE(debug, [  --enable-debug        turn on debugging [default=no]],[if eval "test x$enable_debug = xyes"; then
 	OPTIM="-g "
 fi])
@@ -449,23 +452,25 @@
 	case "$uname" in
 		FreeBSD* | NetBSD* | OpenBSD*)
 			# *BSD
-			INITDIR=""
-			INITDDIR=""
+			INSTALL_INIT=""
 			;;
 
 		Linux*)
 			# Linux seems to choose an init.d directory at random...
 			if test -d /sbin/init.d; then
 				# SuSE
+				INSTALL_INIT="install-init"
 				INITDIR="/sbin/init.d"
 				INITDDIR=".."
 			else
 				if test -d /etc/rc.d; then
 					# RedHat
+					INSTALL_INIT="install-init"
 					INITDIR="/etc/rc.d"
 					INITDDIR="../init.d"
 				else
 					# Others
+					INSTALL_INIT="install-init"
 					INITDIR="/etc"
 					INITDDIR="../init.d"
 				fi
@@ -473,32 +478,55 @@
 			;;
 
 		OSF1* | HP-UX*)
+			INSTALL_INIT="install-init"
 			INITDIR="/sbin"
 			INITDDIR="../init.d"
 			;;
 
 		*)
+			INSTALL_INIT="install-init"
 			INITDIR="/etc"
 			INITDDIR="../init.d"
 			;;
 
 	esac
 else
-	INITDIR="/etc"
-	INITDDIR="../init.d"
+	case "$uname" in
+		FreeBSD* | NetBSD* | OpenBSD*)
+			INSTALL_INIT=""
+			INITDIR="/etc"
+			INITDDIR="../init.d"
+			;;
+		*)
+			INSTALL_INIT="install-init"
+			INITDIR="/etc"
+			INITDDIR="../init.d"
+			;;
+	esac
 fi
 
+AC_SUBST(INSTALL_INIT)
 AC_SUBST(INITDIR)
 AC_SUBST(INITDDIR)
 
 dnl Setup default locations...
-CUPS_SERVERROOT='${prefix}/etc/cups'
-CUPS_LOGDIR='${prefix}/var/log/cups'
-CUPS_REQUESTS='${prefix}/var/spool/cups'
-
-AC_DEFINE_UNQUOTED(CUPS_SERVERROOT, "$prefix/etc/cups")
-AC_DEFINE_UNQUOTED(CUPS_LOGDIR, "$prefix/var/log/cups")
-AC_DEFINE_UNQUOTED(CUPS_REQUESTS, "$prefix/var/spool/cups")
+if test "$enable_rootconfig" = "yes"; then
+	CUPS_SERVERROOT='/etc/cups'
+	CUPS_LOGDIR='/var/log/cups'
+	CUPS_REQUESTS='/var/spool/cups'
+
+	AC_DEFINE_UNQUOTED(CUPS_SERVERROOT, "/etc/cups")
+	AC_DEFINE_UNQUOTED(CUPS_LOGDIR, "/var/log/cups")
+	AC_DEFINE_UNQUOTED(CUPS_REQUESTS, "/var/spool/cups")
+else
+	CUPS_SERVERROOT='${prefix}/etc/cups'
+	CUPS_LOGDIR='${prefix}/var/log/cups'
+	CUPS_REQUESTS='${prefix}/var/spool/cups'
+
+	AC_DEFINE_UNQUOTED(CUPS_SERVERROOT, "$prefix/etc/cups")
+	AC_DEFINE_UNQUOTED(CUPS_LOGDIR, "$prefix/var/log/cups")
+	AC_DEFINE_UNQUOTED(CUPS_REQUESTS, "$prefix/var/spool/cups")
+fi
 
 dnl See what directory to put server executables...
 case "$uname" in
@@ -549,8 +577,8 @@
 AC_SUBST(CUPS_DATADIR)
 
 dnl Set the CUPS_DOCROOT directory...
-CUPS_DOCROOT='${exec_prefix}/share/doc/cups'
-AC_DEFINE_UNQUOTED(CUPS_DOCROOT, "$exec_prefix/share/doc/cups")
+CUPS_DOCROOT='${exec_prefix}/share/doc/html/cups'
+AC_DEFINE_UNQUOTED(CUPS_DOCROOT, "$exec_prefix/share/doc/html/cups")
 AC_SUBST(CUPS_DOCROOT)
 
 dnl Set the CUPS_FONTPATH directory...
