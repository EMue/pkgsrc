$NetBSD: patch-ab,v 1.2 2000/08/05 02:36:38 jlam Exp $

--- configure.in.orig	Thu Dec 16 10:22:33 1999
+++ configure.in	Fri Aug  4 20:27:48 2000
@@ -86,7 +86,7 @@
  _SAVE_LDFLAGS=$LDFLAGS
 
 if test "$TTF_DIR" != "" ; then
-CFLAGS="-I${TTF_DIR}/include $CFLAGS"
+CFLAGS="-I${TTF_DIR}/include/freetype $CFLAGS"
 LDFLAGS="-L${TTF_DIR}/lib $LDFLAGS"
 fi
 
@@ -100,22 +100,21 @@
     AC_MSG_RESULT("$result")
 fi
 if [ test "$SYSTEM_TTF" = 1 ]; then
-	AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf"],
-	AC_CHECK_LIB(ttf, TT_Done_FreeType, [TTF_LIBS="-lttf -lnsl"],
-	no_ttf=yes, -lnsl))
+	AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf -lintl"],
+	no_ttf=yes, -lintl)
 else
     no_ttf=yes
 fi
 
 if [ test -n "${TTF_DIR}" && test -d "${TTF_DIR}" && test "$SYSTEM_TTF" = 1 ]; then
-    TTF_CFLAGS="-I${TTF_DIR}/include"
+    TTF_CFLAGS="-I${TTF_DIR}/include/freetype"
     TTF_LIBS="-L${TTF_DIR}/lib ${TTF_LIBS}"
 fi
 
 if test "x$no_ttf" = xyes; then
     if test "$TTF_DIR" != "" ; then
-    CFLAGS="-I${TTF_DIR} $CFLAGS"
-    LDFLAGS="-L${TTF_DIR} $LDFLAGS"
+    CFLAGS="-I${TTF_DIR}/include/freetype $CFLAGS"
+    LDFLAGS="-L${TTF_DIR}/lib $LDFLAGS"
     fi
 
     if test "$TTF_DIR" = no; then
@@ -128,16 +127,15 @@
         AC_MSG_RESULT("$result")
     fi
     if [ test "$SYSTEM_TTF" = 1 ]; then
-		AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf"],
-		AC_CHECK_LIB(ttf, TT_Done_FreeType, [TTF_LIBS="-lttf -lnsl"],
-		no_ttf=yes, -lnsl))
+		AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf -lintl"],
+		no_ttf=yes, -lintl)
     else
         no_ttf=yes
     fi
 
 if [ test -n "${TTF_DIR}" && test -d "${TTF_DIR}" && test "$SYSTEM_TTF" = 1 ]; then
-    TTF_CFLAGS="-I${TTF_DIR}"
-    TTF_LIBS="-L${TTF_DIR} ${TTF_LIBS}"
+    TTF_CFLAGS="-I${TTF_DIR}/include/freetype"
+    TTF_LIBS="-L${TTF_DIR}/lib ${TTF_LIBS}"
 fi
 
 fi
@@ -404,20 +402,21 @@
     AC_MSG_RESULT("$result")
 fi
 if [ test "$SYSTEM_TTF" = 1 ]; then
-    AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf"],no_ttf=yes,-lm)
+    AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf -lintl"],
+    no_ttf=yes,-lintl)
 else
     no_ttf=yes
 fi
 
 if [ test -n "${TTF_DIR}" && test -d "${TTF_DIR}" && test "$SYSTEM_TTF" = 1 ]; then
-    TTF_CFLAGS="-I${TTF_DIR}/include"
+    TTF_CFLAGS="-I${TTF_DIR}/include/freetype"
     TTF_LIBS="-L${TTF_DIR}/lib ${TTF_LIBS}"
 fi
 
 if test "x$no_ttf" = xyes; then
     if test "$TTF_DIR" != "" ; then
-    CFLAGS="-I${TTF_DIR} $CFLAGS"
-    LDFLAGS="-L${TTF_DIR} $LDFLAGS"
+    CFLAGS="-I${TTF_DIR}/include/freetype $CFLAGS"
+    LDFLAGS="-L${TTF_DIR}/lib $LDFLAGS"
     fi
 
     if test "$TTF_DIR" = no; then
@@ -430,15 +429,16 @@
         AC_MSG_RESULT("$result")
     fi
     if [ test "$SYSTEM_TTF" = 1 ]; then
-        AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf"],no_ttf=yes,-lm)
+        AC_CHECK_LIB(ttf, TT_Init_FreeType, [TTF_LIBS="-lttf -lintl"],
+	no_ttf=yes,-lintl)
     else
         no_ttf=yes
     fi
 
 
 if [ test -n "${TTF_DIR}" && test -d "${TTF_DIR}" && test "$SYSTEM_TTF" = 1 ]; then
-    TTF_CFLAGS="-I${TTF_DIR}"
-    TTF_LIBS="-L${TTF_DIR} ${TTF_LIBS}"
+    TTF_CFLAGS="-I${TTF_DIR}/include/freetype"
+    TTF_LIBS="-L${TTF_DIR}/lib ${TTF_LIBS}"
 fi
 
 fi
