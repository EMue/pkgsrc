$NetBSD: patch-au,v 1.2 2001/05/10 23:35:28 jtb Exp $

--- sd/dv/Makefile.orig	Wed Dec 20 13:33:17 2000
+++ sd/dv/Makefile
@@ -93,64 +93,51 @@
 	$(SESDOBJECTSX) $(ESDOBJECTSX) $(SSDOBJECTSX) $(UCDOBJECTSX)
 
 tcmdv:  $(DVOBJECTS) tcmdv.o
-	$(PURIFY) $(CC) $(CFLAGS) $(DVOBJECTS) \
-	$(LDFLAGS) -ldiagram -leditor -lguix $(LIB_DIR)/libglobal.a \
+	$(CXX) $(CXXFLAGS) $(DVOBJECTS) \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmguix -ltcmglobal \
 	tcmdv.o -o $@ $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(MV) -f $@ $(BIN_DIR)
 
 libtcmdv.a: $(DVOBJECTS)
-	$(AR) $@ $(DVOBJECTS)
-	chmod a+rx $@
+	$(AR) cr $@ $(DVOBJECTS)
 	$(RANLIB) $@
-	$(MV) $@ $(LIB_DIR)
+	$(MV) -f $@ $(LIB_DIR)
 
 terd:   $(EROBJECTS) ereditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(EROBJECTS) ereditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(EROBJECTS) ereditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 tcrd:   $(CROBJECTS) creditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(CROBJECTS) creditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(CROBJECTS) creditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 tesd:   $(ESDOBJECTS) esdeditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(ESDOBJECTS) esdeditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(ESDOBJECTS) esdeditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 tssd:   $(SSDOBJECTS) ssdeditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(SSDOBJECTS) ssdeditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(SSDOBJECTS) ssdeditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 tucd:   $(UCDOBJECTS) uceditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(UCDOBJECTS) uceditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(UCDOBJECTS) uceditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 cardconstraint.tab.h: cardconstraint.y
-	$(YACC) --debug -p cardconstraint -d cardconstraint.y
+	$(YACC) -b cardconstraint -p cardconstraint -d cardconstraint.y
 cardconstraint.tab.c: cardconstraint.y cardconstraint.l
-	$(YACC) --debug -p cardconstraint -d cardconstraint.y
+	$(YACC) -b cardconstraint -p cardconstraint -d cardconstraint.y
 cardconstraint.c: cardconstraint.l cardconstraint.tab.h
 	$(LEX) -Pcardconstraint -ocardconstraint.c cardconstraint.l
 cardconstraint.o: cardconstraint.c
-	$(Cc) -c cardconstraint.c
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c cardconstraint.c
 cardconstraint.tab.o: cardconstraint.tab.h cardconstraint.tab.c
-	$(Cc) -c cardconstraint.tab.c
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c cardconstraint.tab.c
 
 clean: xclean
 	rm -f cardconstraint.c cardconstraint.tab.h cardconstraint.tab.c
