$NetBSD: patch-av,v 1.2 2001/05/10 23:35:28 jtb Exp $

--- sd/fv/Makefile.orig	Wed Dec 20 13:33:20 2000
+++ sd/fv/Makefile
@@ -51,50 +51,42 @@
 FVOBJECTS = $(DCFOBJECTS) $(SNOBJECTS)
 
 tcmfv:  $(FVOBJECTS) tcmfv.o
-	$(PURIFY) $(CC) $(CFLAGS) $(FVOBJECTS) \
-	-ldiagram -leditor -lguix $(LIB_DIR)/libglobal.a \
+	$(CXX) $(CXXFLAGS) $(FVOBJECTS) \
+	-ltcmdiagram -ltcmeditor -ltcmguix -ltcmlglobal \
 	tcmfv.o -o $@ $(LDFLAGS) $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(MV) -f $@ $(BIN_DIR)
 
 libtcmfv.a: $(FVOBJECTS)
-	$(AR) $@ $(FVOBJECTS)
-	chmod a+rx $@
+	$(AR) cr $@ $(FVOBJECTS)
 	$(RANLIB) $@
-	$(MV) $@ $(LIB_DIR)
+	$(MV) -f $@ $(LIB_DIR)
 
 tdfd:   $(DFOBJECTS) dfeditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(DFOBJECTS) dfeditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(DFOBJECTS) dfeditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 tsnd:   $(SNOBJECTS) $(PARSER) sneditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(SNOBJECTS) $(PARSER) sneditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
+	$(CXX) $(CXXFLAGS) $(SNOBJECTS) $(PARSER) sneditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
 	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(MV) -f $@ $(BIN_DIR)
 
 tefd:  $(DCFOBJECTS) dcfeditor.o
-	$(PURIFY) $(CC) $(CFLAGS) $(DCFOBJECTS) dcfeditor.o -o $@ \
-	$(LDFLAGS) -ldiagram -leditor -lgui -lglobal $(LDLIBS)
-	chmod a+rx $@
-	$(STRIP) $@
-	$(MV) $@ $(BIN_DIR)
+	$(CXX) $(CXXFLAGS) $(DCFOBJECTS) dcfeditor.o -o $@ \
+	$(LDFLAGS) -ltcmdiagram -ltcmeditor -ltcmgui -ltcmglobal $(LDLIBS)
+	$(MV) -f $@ $(BIN_DIR)
 
 cardconstraint.tab.h: cardconstraint.y
-	$(YACC) --debug -p cardconstraint -d cardconstraint.y
+	$(YACC) -b cardconstraint -p cardconstraint -d cardconstraint.y
 cardconstraint.tab.c: cardconstraint.y cardconstraint.l
-	$(YACC) --debug -p cardconstraint -d cardconstraint.y
+	$(YACC) -b cardconstraint -p cardconstraint -d cardconstraint.y
 cardconstraint.c: cardconstraint.l cardconstraint.tab.h
 	$(LEX) -Pcardconstraint -ocardconstraint.c cardconstraint.l
 cardconstraint.o: cardconstraint.c
-	$(Cc) -c cardconstraint.c
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c cardconstraint.c
 cardconstraint.tab.o: cardconstraint.tab.h cardconstraint.tab.c
-	$(Cc) -c cardconstraint.tab.c
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c cardconstraint.tab.c
 
 clean: xclean
 	rm -f cardconstraint.c cardconstraint.tab.h cardconstraint.tab.c
