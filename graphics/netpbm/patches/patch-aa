$NetBSD: patch-aa,v 1.10 2000/06/05 00:36:31 wiz Exp $

--- Makefile.config.orig	Thu Jun  1 19:17:32 2000
+++ Makefile.config	Mon Jun  5 01:35:05 2000
@@ -29,8 +29,8 @@
 #
 # For cygwin, only static libraries work, so set STATICLIB = Y  .
 
-STATICLIB = N
-#STATICLIB = Y
+#STATICLIB = N
+STATICLIB = Y
 
 # The following are commands for the build process to use.  These values
 # do not get built into anything.
@@ -39,14 +39,15 @@
 #Tru64:
 #CC =		cc
 #CC =		gcc
-CC =		gcc
+#CC =		gcc
 
 # The linker.
-LD = $(CC)
+#LD = $(CC)
 #LD = ld
 #Tru64:
 #LD = cc
 #LD = gcc 
+LD = $(LIBTOOL) --mode=link $(CC)
 
 # Normally the man pages are installed using "install".  But via this
 # variable, you can use something else, for example a script that
@@ -59,7 +60,7 @@
 # MAKE is set automatically by Make to what was used to invoke Make.
 SHELL =	/bin/sh
 
-INSTALL = install
+INSTALL = install -c
 # Solaris:
 #INSTALL = /usr/ucb/install
 #Tru64:
@@ -73,7 +74,7 @@
 
 # C compiler options
 
-CFLAGS = -pedantic -O2 -Wall -Wno-uninitialized $(CDEBUG)
+CFLAGS += -pedantic -Wall -Wno-uninitialized $(CDEBUG)
 # On DEC Tru64 4.0F (at least), you need -DLONG_32 for ppmtompeg.
 #Tru64:
 #CFLAGS = -O2 -std1 DLONG_32 $(CDEBUG)
@@ -87,7 +88,7 @@
   
 # linker options.  
 
-LDFLAGS =
+#LDFLAGS =
 # Eunice users may want to use -noshare so that the executables can
 # run standalone:
 #LDFLAGS = -noshare
@@ -139,11 +140,11 @@
 # but otherwise will not.
 
 # Use the Tiff library included with Netpbm:
-TIFFHDR_DIR = $(SRCDIR)/libtiff
-TIFFLIB_DIR = $(SRCDIR)/libtiff
+#TIFFHDR_DIR = $(SRCDIR)/libtiff
+#TIFFLIB_DIR = $(SRCDIR)/libtiff
 #NetBSD:
-#TIFFHDR_DIR = $(LOCALBASE)/include
-#TIFFLIB_DIR = $(LOCALBASE)/lib
+TIFFHDR_DIR = $(LOCALBASE)/include
+TIFFLIB_DIR = $(LOCALBASE)/lib
 # OSF, Tru64:
 #TIFFHDR_DIR = /usr/local1/DEC/include
 #TIFFLIB_DIR = /usr/local1/DEC/lib
@@ -164,11 +165,11 @@
 # at least JPEGLIB_DIR here, or the tiff converters will not build at
 # all.
 
-JPEGLIB_DIR = /usr/lib/jpeg
-JPEGHDR_DIR = /usr/include/jpeg
+#JPEGLIB_DIR = /usr/lib/jpeg
+#JPEGHDR_DIR = /usr/include/jpeg
 # Netbsd:
-#JPEGLIB_DIR = ${LOCALBASE}/lib
-#JPEGHDR_DIR = ${LOCALBASE}/include
+JPEGLIB_DIR = ${LOCALBASE}/lib
+JPEGHDR_DIR = ${LOCALBASE}/include
 # OSF, Tru64:
 #JPEGLIB_DIR = /usr/local1/DEC/lib
 #JPEGHDR_DIR = /usr/local1/DEC/include
@@ -186,11 +187,11 @@
 # here.  If you do not have the PNG library, and still want to
 # successully build everything else, put NONE for these.
 
-PNGLIB_DIR = /lib
-PNGHDR_DIR = /usr/include/png
+#PNGLIB_DIR = /lib
+#PNGHDR_DIR = /usr/include/png
 # NetBSD:
-#PNGLIB_DIR = $(LOCALBASE)/lib
-#PNGHDR_DIR = $(LOCALBASE)/include
+PNGLIB_DIR = $(LOCALBASE)/lib
+PNGHDR_DIR = $(LOCALBASE)/include
 # OSF/Tru64:
 #PNGLIB_DIR = /usr/local1/DEC/lib
 #PNGHDR_DIR = /usr/local1/DEC/include
@@ -296,8 +297,8 @@
 #be a rule in the makefiles to make whatever the fliename turns out to be.
 #Only .a and .so work.
 ifeq ($(STATICLIB),Y)
-  NETPBMLIBSUFFIX = a
-  LIBTIFFSUFFIX = a
+  NETPBMLIBSUFFIX = la
+  LIBTIFFSUFFIX = la
 else
   NETPBMLIBSUFFIX = so
   LIBTIFFSUFFIX = so
