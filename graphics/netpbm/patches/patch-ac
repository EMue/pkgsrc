$NetBSD: patch-ac,v 1.5 1998/08/07 10:40:50 agc Exp $

--- pnm/Makefile.orig	Mon Jan 31 09:47:32 1994
+++ pnm/Makefile	Sat Jun 20 04:21:57 1998
@@ -62,6 +62,7 @@
 		pnmtile pnmtoddif pnmtofits pnmtops pnmtorast \
-		pnmtosgi pnmtosir pnmtoxwd \
-		rasttopnm sgitopnm sirtopnm xwdtopnm zeisstopnm
+		pnmtorle pnmtosgi pnmtosir pnmtoxwd \
+		rasttopnm rletopnm sgitopnm sirtopnm xwdtopnm zeisstopnm
 MATHBINARIES =	pnmgamma pnmnlfilt pnmrotate pnmscale pnmshear
-BINARIES =      $(PORTBINARIES) $(MATHBINARIES) $(TIFFBINARIES)
+PNGBINARIES =	pngtopnm pnmtopng
+BINARIES =      $(PORTBINARIES) $(MATHBINARIES) $(PNGBINARIES) $(TIFFBINARIES)
 SCRIPTS =	anytopnm pnmindex pnmmargin pnmsmooth pstopnm
@@ -76,3 +77,3 @@
 		pnmgamma.o pnmnlfilt.o pnmrotate.o pnmscale.o pnmshear.o
-OBJECTS =	$(PORTOBJECTS) $(TIFFOBJECTS)
+OBJECTS =	$(PORTOBJECTS)
 
@@ -130,4 +131,10 @@
 # Rules for plain programs.
-$(PORTBINARIES) $(TIFFBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) $(TIFFLIB)
-	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@ $@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) $(TIFFLIB)
+$(PORTBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
+	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@ $@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
+
+$(PNGBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
+	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@ $@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) -L${LOCALBASE}/lib -lpng -lz -lm
+
+$(TIFFBINARIES):	pnm.h $(DEFPPM) $(DEFPGM) $(DEFPBM) $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM)
+	$(CC) $(ALLCFLAGS) $(LDFLAGS) -o $@ $@.c $(LIBPNM) $(LIBPPM) $(LIBPGM) $(LIBPBM) $(TIFFLIB) -lm -lz
 
