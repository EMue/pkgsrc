$NetBSD: patch-aa,v 1.2 2000/03/13 14:41:50 tron Exp $

--- configure.orig	Thu Nov 25 21:24:04 1999
+++ configure	Mon Mar 13 15:15:15 2000
@@ -668,7 +668,7 @@
 # It thinks the first close brace ends the variable substitution.
 test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
 
-test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
+test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
 
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
@@ -1354,6 +1354,7 @@
 fi
 
 
+if false; then
 # Check for any special flags to pass to ltconfig.
 libtool_flags="--cache-file=$cache_file"
 test "$enable_shared" = no && libtool_flags="$libtool_flags --disable-shared"
@@ -1507,6 +1508,7 @@
 
 # Always use our own libtool.
 LIBTOOL='$(SHELL) $(top_builddir)/libtool'
+fi
 
 # Redirect the config.log output again, so that the ltconfig log is not
 # clobbered by the next message.
@@ -4293,8 +4295,8 @@
 
 
 
-GLIB_CFLAGS=`echo $GTK_CFLAGS | sed 's/^.*\(-I[^ ]*glib[^ ]*  *-I[^ ]*\).*$/\1/'`
-GLIB_LDFLAGS=`echo $GTK_LIBS | sed -e 's/^.*-lgdk[^ ]* *\(-L[^ ]*\).*$/\1/' -e 's/^.* -lgdk[^ ]* .*$//'`
+GLIB_CFLAGS=`${LOCALBASE}/bin/glib-config --cflags`
+GLIB_LDFLAGS=`${LOCALBASE}/bin/glib-config --libs`
 if test -z "$GLIB_LDFLAGS" ; then
   GLIB_LDFLAGS=`echo $GTK_LIBS | sed 's/^ *\(-L[^ ]*\) .*$/\1/'`
 fi 
@@ -4657,7 +4659,7 @@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-ltiff -lm $LIBS"
+LIBS="-ltiff -lz -ljpeg -lm $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 4663 "configure"
 #include "confdefs.h"
