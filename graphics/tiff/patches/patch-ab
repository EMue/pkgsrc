--- libtiff/Makefile.in.orig	Mon Jul 20 11:13:09 1998
+++ libtiff/Makefile.in	Mon Jul 20 11:40:13 1998
@@ -35,7 +35,7 @@
 #
 SHELL	= @SCRIPT_SH@
 NULL	=
-CC	= @CCOMPILER@
+CC	= ${PREFIX}/bin/libtool @CCOMPILER@
 AR	= @AR@
 AROPTS	= @AROPTS@
 RANLIB	= @RANLIB@
@@ -135,7 +135,7 @@
 	tif_write.o \
 	tif_zip.o \
 	${NULL}
-TARGETS	= libtiff.a
+TARGETS	= libtiff.la
 
 all:	${TARGETS}
 	if [ @DSO@dso != nodso ]; then \
@@ -144,9 +144,9 @@
 	    true; \
 	fi
 
-libtiff.a: ${OBJS}
-	${AR} ${AROPTS} libtiff.a $?
-	${RANLIB} libtiff.a
+libtiff.la: ${OBJS}
+	${CC} -o libtiff.la ${OBJS:.o=.lo} -rpath ${PREFIX}/lib \
+		-version-info 3:4
 
 #
 # NB: The configure script verifies that the configured
@@ -328,7 +328,7 @@
 	fi
 install: all installHdrs
 	${INSTALL} -idb tiff.sw.dev -m 755 -dir @DIR_LIB@
-	${INSTALL} -idb tiff.sw.dev -m 444 -F @DIR_LIB@ -O libtiff.a
+	${PREFIX}/bin/libtool --mode=install ${BSD_INSTALL_DATA} libtiff.la @DIR_LIB@
 	if [ @DSO@dso != nodso ]; then					\
 	    ${MAKE} installDSO;						\
 	else								\
