$NetBSD: patch-ad,v 1.3 1998/08/07 10:40:55 agc Exp $

--- dynPenOp.c.orig	Wed Aug 13 16:10:00 1997
+++ dynPenOp.c	Fri Aug 29 14:08:48 1997
@@ -28,6 +28,11 @@
 #include "misc.h"
 #include "Paint.h"
 
+#ifndef HZ
+#include <time.h>
+#define HZ CLK_TCK
+#endif
+
 #define XTIMEOUT ((unsigned long)(1.5*1000/HZ)) /* ms, should be larger than 1000/HZ */
 
 typedef struct {
--- readRC.c	1998/02/04 16:36:16	1.1
+++ readRC.c	1998/02/04 16:41:52
@@ -64,6 +64,9 @@
 static FILE *
 openTemp(char **np)
 {
+#ifdef __NetBSD__
+    int	fd;
+#endif
     char *n;
     char xx[256];
 
@@ -72,11 +75,20 @@
 
     strcpy(xx, n);
     strcat(xx, "/XPaintXXXXXXX");
+#ifdef __NetBSD__
+    if ((fd = mkstemp(xx)) < 0)
+	    return (FILE *) NULL;
+    tempName[++tempIndex] = XtNewString(xx);
+    if (np != NULL)
+	*np = tempName[tempIndex];
+    return fdopen(fd, "w");
+#else
     n = mktemp(xx);
     tempName[++tempIndex] = XtNewString(n);
     if (np != NULL)
 	*np = tempName[tempIndex];
     return fopen(tempName[tempIndex], "w");
+#endif
 }
 
 static void 
--- Local.config.orig	Wed Aug 13 19:36:11 1997
+++ Local.config	Wed Feb  4 17:44:44 1998
@@ -130,9 +130,11 @@
 #if defined(FreeBSDArchitecture) || defined(NetBSDArchitecture) ||  \
     defined(BSD386Architecture)
 ARCH_DEFINES = -DHAVE_PARAM_H
-TIFF_INCLUDE = -I/usr/local/include
-TIFF_LIB     = -L/usr/local/lib -ltiff
-JPEG_INCLUDE = -I/usr/local/include
-JPEG_LIB     = -L/usr/local/lib -ljpeg
-XPM_INCLUDE = -I/usr/X11R6/include/X11
+TIFF_INCLUDE = -I${LOCALBASE}/include
+TIFF_LIB     = -L${LOCALBASE}/lib -ltiff
+JPEG_INCLUDE = -I${LOCALBASE}/include
+JPEG_LIB     = -L${LOCALBASE}/lib -ljpeg
+PNG_INCLUDE = -I${LOCALBASE}/include/png
+PNG_LIB     = -L${LOCALBASE}/lib -lpng -lz
+XPM_INCLUDE = -I${X11BASE}/include/X11
 #endif
