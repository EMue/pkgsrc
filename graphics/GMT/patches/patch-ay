$NetBSD: patch-ay,v 1.3 2001/03/25 23:33:48 jtb Exp $

--- src/xgrid/makefile.in.orig
+++ src/xgrid/makefile.in
@@ -19,14 +19,14 @@
 #	Location of GMT and CDF header files
 
 CFLAGS=	$(CC_OPT) $(WIN32) -I.. -I$(NETCDF)/include @X_CFLAGS@ @CFLAGS@
-XLIBS=@X_PRE_LIBS@ @X_LIBS@ -lXt -lXaw -lXmu -lXext -lX11 @X_EXTRA_LIBS@ -L.. -lgmt -lpsl -lnetcdf
+XLIBS=@X_PRE_LIBS@ @X_LIBS@ -lXt -lXaw -lXmu -lXext -lX11 @X_EXTRA_LIBS@ ../libgmt.la ../libpsl.la -lnetcdf
 
 all:		@buildtarget@
 
 install:	@installtarget@
 
 xgridedit-install:
-		$(INSTALL) xgridedit$(EXE) $(bindir)
+		$(LIBTOOL) --mode=install $(INSTALL_PROGRAM) xgridedit$(EXE) $(bindir)
 
 uninstall:
 		\rm -f $(bindir)/xgridedit$(EXE)
@@ -35,15 +35,17 @@
 		\rm -f makefile config.cache config.log config.status
 
 clean:
-		rm -f *.o xgridedit$(EXE)
+		rm -fr *.o *.lo .libs xgridedit$(EXE)
 
 xgridedit:	$(OBJS) $(EDITOBJS) xgridedit.o
-		$(CC) $(CFLAGS) xgridedit.o -o xgridedit $(OBJS) \
-			$(EDITOBJS) $(CDF) $(XLIBS) $(LIBS) $(LDFLAGS)
+		$(LIBTOOL) --mode=link $(CC) $(CFLAGS) -o xgridedit   \
+		xgridedit.lo $(OBJS:.o=.lo) $(EDITOBJS:.o=.lo) $(CDF) \
+		$(XLIBS) $(LIBS) $(LDFLAGS)
 
 xgridedit.o:	xGridEdit.c xgrid_utility.h xgrid_controls.h \
 			xgrid_messages.h xgrid_view.h xgrid_textInput.h
-		$(CC) $(CFLAGS) -c xGridEdit.c -o xgridedit.o
+		$(LIBTOOL) --mode=compile $(CC) $(CFLAGS) -c xGridEdit.c \
+		-o xgridedit.lo
 
 xgrid_utility.o:	xgrid_utility.h
 
@@ -69,3 +71,6 @@
 
 xgrid_view.o:		xgrid_utility.h xgrid_Xutility.h xgrid_GMTgrid.h \
 			xgrid_view.h
+
+.c.o:
+		$(LIBTOOL) --mode=compile $(CC) -c $(CFLAGS) $<
