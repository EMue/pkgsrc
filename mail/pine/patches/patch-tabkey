$NetBSD: patch-tabkey,v 1.5 1999/11/11 17:40:18 tv Exp $

--- pine/mailcmd.c.orig	Mon Oct 11 18:13:50 1999
+++ pine/mailcmd.c	Thu Nov 11 12:03:40 1999
@@ -320,9 +320,7 @@
 	}
 	else{
 	    prompt[0] = '\0';
-	    if(!state->nr_mode
-	       && (IS_NEWS(stream)
-		   || (state->context_current->use & CNTXT_INCMNG))){
+	    if(!state->nr_mode){
 		char nextfolder[MAXPATH];
 
 		strcpy(nextfolder, state->cur_folder);
@@ -465,14 +463,7 @@
 	    char ret = 'n';
 	    int  in_inbox = !strucmp(state->cur_folder,state->inbox_name);
 
-	    if(!state->nr_mode && state->context_current
-	       && ((NEWS_TEST(state->context_current)
-		    && context_isambig(state->cur_folder))
-		   || ((state->context_current->use & CNTXT_INCMNG)
-		       && (in_inbox
-			   || folder_index(state->cur_folder,
-					   state->context_current,
-					   FI_FOLDER) >= 0)))){
+	    if(!state->nr_mode && state->context_current){
 		char	    nextfolder[MAXPATH];
 		MAILSTREAM *nextstream = NULL;
 		long	    recent_cnt;
@@ -490,8 +481,8 @@
 			    };
 
 			    sprintf(prompt, "No more %ss.  Return to \"%s\"? ",
-				    (state->context_current->use&CNTXT_INCMNG)
-				      ? "incoming folder" : "news group", 
+				    NEWS_TEST(state->context_current)
+				      ? "news group" : "folder", 
 				    state->inbox_name);
 
 			    ret = radio_buttons(prompt, -FOOTER_ROWS(state),
@@ -512,15 +503,15 @@
 			}
 			else
 			  q_status_message1(SM_ORDER, 0, 2, "No more %ss",
-				     (state->context_current->use&CNTXT_INCMNG)
-				        ? "incoming folder" : "news group");
+				      NEWS_TEST(state->context_current)
+				        ? "news group" : "folder");
 
 			break;
 		    }
 
 		    sprintf(prompt, "View next %s \"%s\" (%s recent)? ",
-			    (state->context_current->use & CNTXT_INCMNG)
-			      ? "Incoming folder" : "news group",
+			    NEWS_TEST(state->context_current)
+			      ? "news group" : "folder", 
 			    nextfolder,
 			    recent_cnt ? long2string(recent_cnt) : "some");
 
@@ -1350,12 +1341,9 @@
 	}
 
 	if(!state->nr_mode
-	   && ((IS_NEWS(state->mail_stream)
-		|| ((state->context_current->use & CNTXT_INCMNG)
-		    && context_isambig(state->cur_folder)))
 	       && (msgno == next_sorted_flagged(F_UNDEL|F_UNSEEN,
 						state->mail_stream,
-						msgno, &opts)))){
+						msgno, &opts))){
 	    char nextfolder[MAXPATH];
 
 	    strcpy(nextfolder, state->cur_folder);
