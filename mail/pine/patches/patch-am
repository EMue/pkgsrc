$NetBSD: patch-am,v 1.4 1998/08/07 11:09:49 agc Exp $

Revision history

==========================================
Patches for Pine 4.02 from Pavel Kankovsky
==========================================

--- ./pine/mailpart.c.noparanoia	Mon Jul 20 21:18:49 1998
+++ ./pine/mailpart.c	Thu Jul 30 15:41:08 1998
@@ -1230,7 +1230,10 @@

     /* warning: overload "err" use */
     if(err = rfc2231_get_param(param, att_name, NULL, NULL)){
-	strcpy(filename, err);
+	if (strlen(err) >= sizeof(filename))
+	    strcpy(filename, "CAUTION! ORIGINAL FILENAME TOO LONG");
+        else
+	    strcpy(filename, err);
 	fs_give((void **) &err);
     }

