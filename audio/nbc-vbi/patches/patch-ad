$NetBSD: patch-ad,v 1.1 2001/04/23 17:28:18 tron Exp $

--- src/nbc-vbi.c.orig	Sat Nov 11 10:12:22 2000
+++ src/nbc-vbi.c	Mon Apr 23 19:24:29 2001
@@ -284,7 +284,7 @@
     }
     fclose(fp);
     ptr = 0x0;			//finish buffer with double zero
-    realloc(filter, filtersize + 1);
+    filter = realloc(filter, filtersize + 1);
     return (1);
 }
 
@@ -544,6 +544,7 @@
 	mp3.received = 0;
 	mp3.playlist = 1;
 	free(mp3.plptr);	// free old playlist
+	mp3.plptr = NULL;
     }
 
     if (mp3.size != 0)		// dont write very first file
@@ -662,7 +663,6 @@
     {
 	memset(mp3.plentry, 0, 20 * sizeof(char *));
 	mp3.plptr = (char *) malloc(TMPSIZE);	// alloc mem for pl
-	memset(mp3.plptr, 0, TMPSIZE);
 	memcpy(mp3.plptr, data, TMPSIZE);
 	ptr = mp3.plptr;
 
@@ -678,7 +678,7 @@
 	}
 
 
-	realloc(mp3.plptr, plsize);	// adjust its size
+	mp3.plptr = realloc(mp3.plptr, plsize);	// adjust its size
 	print_playlist(mp3.plentry);
 
 	memset(mp3.filename, 0, 256);
