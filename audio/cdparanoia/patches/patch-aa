$NetBSD: patch-aa,v 1.3 2001/06/25 12:17:55 simonb Exp $

--- configure.in.orig	Mon Aug 16 08:29:43 1999
+++ configure.in	Mon Jun 25 21:15:58 2001
@@ -20,6 +20,12 @@
 	i?86-*-linux*)
 		DEBUG="-g -Wall -fsigned-char"
 		OPT="-O20 -ffast-math -fsigned-char -finline-functions";;
+	i?86-*-netbsd*)
+		DEBUG="-g -Wall -fsigned-char"
+		OPT="-O2 -ffast-math -fsigned-char -finline-functions";;
+	*-netbsd*)
+		DEBUG="-g -Wall"
+		OPT="-O";;
 	*)
 		DEBUG="-g -Wall -fsigned-char"
 		OPT="-O20 -fsigned-char";;
@@ -28,7 +34,10 @@
 
 AC_HEADER_STDC
 
-CFLAGS=""
+dnl Uncomment the following if you don't want to honor CFLAGS passed in from
+dnl the environment.
+dnl
+dnl CFLAGS=""
 
 TYPESIZES="" 
 
@@ -62,15 +71,25 @@
 	
 AC_CHECK_HEADERS(linux/sbpcd.h, SBPCD_H="-DSBPCD_H='1' ")
 AC_CHECK_HEADERS(linux/ucdrom.h, UCDROM_H="-DUCDROM_H='1' ")
+AC_CHECK_HEADERS(util.h,
+  AC_CHECK_LIB(util, getrawpartition,
+    RAWPART="-DHAVE_GETRAWPARTITION='1' " LIBUTIL="-lutil"
+  )
+)
+
+AC_CHECK_FUNCS(getopt_long, GETOPT_LONG="-DGETOPT_LONG='1' ")
 
 AC_PROG_MAKE_SET
 AC_C_CONST
 
 AC_SUBST(SBPCD_H)
 AC_SUBST(UCDROM_H)
+AC_SUBST(GETOPT_LONG)
+AC_SUBST(RAWPART)
 AC_SUBST(TYPESIZES)
 AC_SUBST(OPT)
 AC_SUBST(DEBUG)
 AC_SUBST(CC)
+AC_SUBST(LIBUTIL)
 
 AC_OUTPUT(Makefile interface/Makefile paranoia/Makefile)
