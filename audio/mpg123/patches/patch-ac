$NetBSD: patch-ac,v 1.2 1999/04/08 07:34:57 tron Exp $

--- audio_sun.c.orig	Mon Jan 11 07:54:46 1999
+++ audio_sun.c	Wed Apr  7 16:12:21 1999
@@ -17,6 +17,8 @@
 
 #include "mpg123.h"
 
+extern int outburst;
+
 #ifndef SPARCLINUX
 #include <sys/filio.h>
 #ifdef SUNOS
@@ -78,6 +80,13 @@
   }
 
 #ifndef NETBSD
+  AUDIO_INITINFO(&ainfo);
+  if(ioctl(ai->fn, AUDIO_GETINFO, &ainfo) == -1)
+    return -1;
+  outburst = ainfo.blocksize;
+  if(outburst > MAXOUTBURST)
+    outburst = MAXOUTBURST;
+
   AUDIO_INITINFO(&ainfo);
 
   if(ai->output > 0)
