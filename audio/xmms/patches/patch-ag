$NetBSD: patch-ag,v 1.1 2000/03/07 23:03:13 tron Exp $

--- xmms/eq_graph.c.orig	Wed Dec 22 01:43:20 1999
+++ xmms/eq_graph.c	Tue Mar  7 23:25:18 2000
@@ -74,6 +74,14 @@
 	gfloat x[] =
 	{0, 11, 23, 35, 47, 59, 71, 83, 97, 109}, yf[10];
 
+	/*
+	 * This avoids the init_spline() function to be inlined.
+	 * Inlining the function caused troubles when compiling with
+	 * `-O' (at least on FreeBSD).
+	 */
+	void (*__init_spline)(gfloat *, gfloat *, gint, gfloat *) =
+	    init_spline;
+
 	src = get_skin_pixmap(SKIN_EQMAIN);
 	obj = eg->eg_widget.parent;
 	gdk_draw_pixmap(obj, eg->eg_widget.gc, src, 0, 294, eg->eg_widget.x, eg->eg_widget.y, eg->eg_widget.width, eg->eg_widget.height);
@@ -83,7 +91,7 @@
 		cols[i] = gdk_image_get_pixel(img, 0, i);
 	gdk_image_destroy(img);
 
-	init_spline(x, cfg.equalizer_bands, 10, yf);
+	__init_spline(x, cfg.equalizer_bands, 10, yf);
 	for (i = 0; i < 109; i++)
 	{
 		y = 9 - (gint) ((eval_spline(x, cfg.equalizer_bands, yf, 10, i) * 9.0) / 20.0);
