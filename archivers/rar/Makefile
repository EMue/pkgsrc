# $NetBSD: Makefile,v 1.19 2000/01/08 05:07:36 wiz Exp $
# FreeBSD Id: Makefile,v 1.7 1997/08/10 22:31:27 fenner Exp 
#

DISTNAME=		rarbsd
PKGNAME=		rar-2.02
CATEGORIES=		archivers
MASTER_SITES=		ftp://rarsoft.ti.sk/pub/rar/ \
			ftp://ftp.elf.stuba.sk/pub/pc/pack/
EXTRACT_SUFX=		.sfx

MAINTAINER=		packages@netbsd.org
HOMEPAGE=		http://www.rarsoft.com/

ONLY_FOR_PLATFORM=	NetBSD-*-i386

RESTRICTED=		Only unmodified original package can be distributed
NO_PACKAGE=		${RESTRICTED}
NO_CDROM=		${RESTRICTED}

NO_WRKSUBDIR=		yes
EXTRACT_CMD=		${DOWNLOADED_DISTFILE} >/dev/null

pre-extract:
	@${ECHO} You must have COMPAT_12 enabled in your kernel,
	@${ECHO} else extraction \(and running the program\) will fail.
	@${CHMOD} a+x ${DISTDIR}/${DISTFILES}

do-build:
	cd ${WRKSRC} && \
		for i in *.Txt *.Lst; do \
			${TR} -d '\015' < $$i > $$i.tmp; \
			${MV} $$i.tmp $$i; \
		done

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/rar ${PREFIX}/share/rar
	cd ${WRKSRC} && \
		${INSTALL_SCRIPT} rar ${PREFIX}/bin/rar && \
		${INSTALL_MAN} Rar.Txt Rar_FAQ.txt TechNote.Txt \
			License.Txt Internet.Txt ${PREFIX}/share/doc/rar && \
		${INSTALL_DATA} RarFiles.Lst \
			${PREFIX}/share/rar/rarfiles.lst && \
		${INSTALL_DATA} default.sfx \
			${PREFIX}/share/rar/default.sfx && \
		${INSTALL_DATA} Dos.SFX \
			${PREFIX}/share/rar/dos.sfx

.include "../../mk/bsd.pkg.mk"
