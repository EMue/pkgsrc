--- fileio.c.orig	Sat Aug 29 21:51:00 1992
+++ fileio.c	Sat Jun 20 17:26:18 1998
@@ -59,16 +59,6 @@
 #endif /* ?VMS */
 
 
-/* For now, assume DIRENT implies System V implies TERMIO */
-#ifdef DIRENT
-#  ifndef MINIX
-#    ifndef TERMIO
-#      define TERMIO
-#    endif /* !TERMIO */
-#  endif /* !MINIX */
-#endif /* DIRENT */
-
-
 #ifndef EXPORT
 #  ifdef MSVMS
 #    ifdef MSDOS
@@ -99,11 +89,16 @@
 #      define GTTY gtty
 #      define STTY stty
 #    endif /* ?TERMIO */
+#ifdef MODERN
+#include <fcntl.h>
+#include <unistd.h>
+#else
      int isatty OF((int));
      char *ttyname OF((int));
      int open OF((char *, int, ...));
      int close OF((int));
      int read OF((int, voidp *, int));
+#endif
 #  endif /* ?MSVMS */
 #endif /* !EXPORT */
 
@@ -197,6 +192,9 @@
 #endif /* !UTIL */
 
 
+#ifdef MODERN
+#include <unistd.h>
+#else
 /* Library functions not in (most) header files */
 char *mktemp OF((char *));
 int link OF((char *, char *));
@@ -207,6 +205,7 @@
     * parameter is an unsigned long.
     */
 #endif /* !CONVEX */
+#endif
 
 
 #ifndef UTIL    /* the companion #endif is a bit of ways down ... */
@@ -215,11 +214,15 @@
    int utime OF((char *, time_t *));
 #endif /* !__TURBOC__ */
 #ifndef MSDOS
+#ifdef MODERN
+#include <fcntl.h>
+#else
    int open OF((char *, int, ...));
    int close OF((int));
 #  ifndef RMDIR
      int rmdir OF((char *));
 #  endif /* !RMDIR */
+#endif
 #endif /* !MSDOS */
 
 
