$NetBSD: patch-ad,v 1.2 2000/08/06 14:45:05 wiz Exp $

--- MSX.c.orig	Thu Aug  3 19:07:13 2000
+++ MSX.c	Sun Aug  6 15:25:56 2000
@@ -106,7 +106,7 @@
 char *DiskB      = "DRIVEB.DSK";   /* Drive B disk image  */
 
 /** Fixed font used by fMSX **********************************/
-char *FontName   = "DEFAULT.FNT";  /* Font file for text     */
+char *FontName   = FontDir "DEFAULT.FNT";  /* Font file for text     */
 byte *FontBuf;                     /* Font for text modes    */
 byte UseFont     = 0;              /* Use ext. font when 1   */
 
@@ -374,7 +374,7 @@
   {
     case 0:
       if(Verbose) printf("  Opening MSX.ROM...");
-      P=LoadROM("MSX.ROM",0x8000,0);
+      P=LoadROM(RomDir "MSX.ROM",0x8000,0);
       PRINTRESULT(P);
       if(!P) return(0);
       MemMap[0][0][0]=P;
@@ -385,7 +385,7 @@
 
     case 1:
       if(Verbose) printf("  Opening MSX2.ROM...");
-      P=LoadROM("MSX2.ROM",0x8000,0);
+      P=LoadROM(RomDir "MSX2.ROM",0x8000,0);
       PRINTRESULT(P);
       if(!P) return(0);
       MemMap[0][0][0]=P;
@@ -393,7 +393,7 @@
       MemMap[0][0][2]=P+0x4000;
       MemMap[0][0][3]=P+0x6000;
       if(Verbose) printf("  Opening MSX2EXT.ROM...");
-      P=LoadROM("MSX2EXT.ROM",0x4000,0);
+      P=LoadROM(RomDir "MSX2EXT.ROM",0x4000,0);
       PRINTRESULT(P);
       if(!P) return(0);
       MemMap[3][1][0]=P;
@@ -402,7 +402,7 @@
 
     case 2:
       if(Verbose) printf("  Opening MSX2P.ROM...");
-      P=LoadROM("MSX2P.ROM",0x8000,0);
+      P=LoadROM(RomDir "MSX2P.ROM",0x8000,0);
       PRINTRESULT(P);
       if(!P) return(0);
       MemMap[0][0][0]=P;
@@ -410,7 +410,7 @@
       MemMap[0][0][2]=P+0x4000;
       MemMap[0][0][3]=P+0x6000;
       if(Verbose) printf("  Opening MSX2PEXT.ROM...");
-      P=LoadROM("MSX2PEXT.ROM",0x4000,0);
+      P=LoadROM(RomDir "MSX2PEXT.ROM",0x4000,0);
       PRINTRESULT(P);
       if(!P) return(0);
       MemMap[3][1][0]=P;
@@ -419,7 +419,7 @@
   }
 
   /* Try loading DiskROM */
-  if(P=LoadROM("DISK.ROM",0x4000,0))
+  if(P=LoadROM(RomDir "DISK.ROM",0x4000,0))
   {
     if(Verbose) puts("  Opening DISK.ROM...OK");
     MemMap[3][1][2]=P;
@@ -474,16 +474,16 @@
   if(Verbose) printf("Loading other ROMs:\n ");
 
   /* Try loading CMOS memory contents */
-  if(LoadROM("CMOS.ROM",sizeof(RTC),(byte *)RTC))
+  if(LoadROM(RomDir "CMOS.ROM",sizeof(RTC),(byte *)RTC))
   { if(Verbose) printf(" CMOS.ROM"); }
   else memcpy(RTC,RTCInit,sizeof(RTC));
 
   /* Try loading Kanji alphabet ROM */
-  if(Kanji=LoadROM("KANJI.ROM",0x20000,0))
+  if(Kanji=LoadROM(RomDir "KANJI.ROM",0x20000,0))
   { if(Verbose) printf(" KANJI.ROM"); }
 
   /* Try loading RS232 support ROM */
-  if(P=LoadROM("RS232.ROM",0x4000,0))
+  if(P=LoadROM(RomDir "RS232.ROM",0x4000,0))
   {
     if(Verbose) printf(" RS232.ROM");
     MemMap[3][0][2]=P;
@@ -491,7 +491,7 @@
   }
 
   /* Try loading FM-PAC support ROM */
-  if(P=LoadROM("FMPAC.ROM",0x4000,0))
+  if(P=LoadROM(RomDir "FMPAC.ROM",0x4000,0))
   {
     if(Verbose) printf(" FMPAC.ROM");
     MemMap[3][3][2]=P;
@@ -520,7 +520,7 @@
          else J=0;
 
     /* Try loading PAINTER ROM if slot found */
-    if(J&&(P=LoadROM("PAINTER.ROM",0x10000,0)))
+    if(J&&(P=LoadROM(RomDir "PAINTER.ROM",0x10000,0)))
     {
       if(Verbose) printf(" PAINTER.ROM");
       for(I=0;I<8;I++) MemMap[J][0][I]=P+I*0x2000;
