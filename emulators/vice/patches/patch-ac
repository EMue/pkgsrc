$NetBSD: patch-ac,v 1.8 2001/02/26 22:13:35 tron Exp $

--- configure.orig	Mon Dec 11 23:28:18 2000
+++ configure	Mon Feb 26 23:03:01 2001
@@ -4706,6 +4706,8 @@
 	SOUND_DRIVERS="$SOUND_DRIVERS soundsdl.o"
 fi
 
+# we don't want to find OSS emulation, let's use NetBSD's own interface
+if false; then
 for ac_hdr in linux/soundcard.h machine/soundcard.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
@@ -4745,6 +4747,7 @@
   echo "$ac_t""no" 1>&6
 fi
 done
+fi
 
 for ac_hdr in dmedia/audio.h
 do
@@ -5326,7 +5329,7 @@
 #define $ac_tr_lib 1
 EOF
 
-  LIBS="-lesd $LIBS"
+  LIBS="-L${LOCALBASE}/lib -Wl,-R${LOCALBASE}/lib -lesd $LIBS"
 
 else
   echo "$ac_t""no" 1>&6
@@ -5826,7 +5829,7 @@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
+LIBS="-ledit -ltermcap  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 5832 "configure"
 #include "confdefs.h"
@@ -5854,7 +5857,7 @@
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-   READLINE="" LIBS="-lreadline $LIBS"
+   READLINE="" LIBS="-ledit -ltermcap $LIBS"
 else
   echo "$ac_t""no" 1>&6
  
@@ -6360,7 +6363,7 @@
     # For Solaris; some versions of Sun CC require a space after -R and
     # others require no space.  Words are not sufficient . . . .
     case "`(uname -sr) 2>/dev/null`" in
-    "SunOS 5"*)
+    "SunOS 5"*|"NetBSD "*)
       echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
 echo "configure:6366: checking whether -R must be followed by a space" >&5
       ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
@@ -7412,7 +7415,7 @@
 
   fi
 
-
+if false; then
   echo $ac_n "checking for XpmCreatePixmapFromData in -lXpm""... $ac_c" 1>&6
 echo "configure:7418: checking for XpmCreatePixmapFromData in -lXpm" >&5
 ac_lib_var=`echo Xpm'_'XpmCreatePixmapFromData | sed 'y%./+-%__p_%'`
@@ -7457,7 +7460,7 @@
 else
   echo "$ac_t""no" 1>&6
 fi
-
+fi
 
   if test x"$MISSING_X_LIBS" != "x"; then
     echo
