--- makefile.unix.orig	Wed Jun 17 12:07:13 1998
+++ makefile.unix	Tue Jul 21 13:51:44 1998
@@ -36,7 +36,7 @@
 # GNU MAKE is MANDATORY !!!
 # so please give me the path...
 # if GNU make is "native" use this
-MAKE	= make
+MAKE	= gmake
 # else ...
 # MAKE=/usr/people/jantonio/bin/gmake
 
@@ -95,7 +95,9 @@
 ##############################################################################
 
 # *** To disable joystick support comment next line
-# JOY		= -DUSE_JOYSTICK
+ifeq (${MACHINE},i386)
+JOY		= -DUSE_JOYSTICK
+endif
 
 # *** To disable  mouse support comment next line
 MOUSE		= -DUSE_MOUSE
@@ -114,7 +116,9 @@
 # JSLIB   = -lXi
 
 # On iX86 based OS's, if supported, you can use standard joystick driver
-# JS	= -DI386_JOYSTICK
+ifeq (${MACHINE},i386)
+JS	= -DI386_JOYSTICK
+endif
 
 # Linux FM-TOWNS game PAD joystick emulation support
 # Thanks to Osamu Kurati for provided patch
@@ -148,8 +152,8 @@
 # X11INC		= -I/usr/include/X11
 # X11LIB		= -L/usr/lib/X11
 # standard location for XFree86
-X11INC		= -I/usr/X11R6/include
-X11LIB		= -L/usr/X11R6/lib
+X11INC		= -I${PREFIX}/include
+X11LIB		= -L${PREFIX}/lib
 # for Sun systems 
 # X11INC		= -I/usr/openwin/include
 # X11LIB		= -L/usr/openwin/lib
@@ -164,18 +168,18 @@
 # *** Select destination directory for your compiled program , manual page
 # and binary distribution ( if you want to... )
 # ( only needed to install, not to compile... )
-DESTDIR = /usr/games
-MANDIR = /usr/local/man/man6
+DESTDIR = ${PREFIX}/bin
+MANDIR = ${PREFIX}/man/man6
 DISTDIR = /home/ftp/pub/emulators/mame
 
 # *** Where the ROM source tree ?
-MDIR = \"/usr/games/lib/mame\"
+MDIR = \"${PREFIX}/share/mame\"
 
 # *** Where to store high scores ?
-SDIR = \"/usr/games/lib/mame\"
+SDIR = \"${PREFIX}/share/mame\"
 
 # *** Where resides global configuration file ?
-MRC = \"/usr/games/lib/mame/xmamerc\"
+MRC = \"${PREFIX}/share/mame/xmamerc\"
 
 # *** Use this definition as default X Display
 DP = \":0.0\"
@@ -197,8 +201,8 @@
 # you might decide to use these feature. Otherwise, you should use a 
 # timer based audio code and ajust in src/unix/sound.h AUDIO_TIMER_FREQ item
 #
-S_TIM = -DDONTUSE_TIMER
-# S_TIM = -DUSE_TIMER
+# S_TIM = -DDONTUSE_TIMER
+S_TIM = -DUSE_TIMER
 
 # *** When using timer, you should provide the frequency to generate audio sample
 # frames in your system. See readme.unix notes about these item
@@ -220,7 +224,7 @@
 ######## Alpha/Linux/X11
 # ARCH  = linux_alpha
 ######## ix86/Linux/X11
-ARCH  = linux
+# ARCH  = linux
 ######## ix86/Linux/SVGALIB
 # ARCH	= svgalib
 ######## ix86/Linux/GGI *New* *New* *New* Please test - no mouse or joy yet
@@ -228,7 +232,8 @@
 ######## ix86/FreeBSD/X11 and ix86/BSDi/X11
 # ARCH  = FREEBSD
 ######## ix86/NetBSD/X11
-# ARCH  = netbsd_i386
+ARCH  = netbsd
+MACHINE  != uname -m
 ######## Sparc/SunOS/X11 ( no sound )
 # ARCH  = sunos
 ######## ix86/Solaris/X11
@@ -304,17 +309,22 @@
 		-fomit-frame-pointer -Wall
 INST.FREEBSD   = doinstall
 
-# netbsd_i386
+# netbsd
 #####################
-#If you want sound add to DEFS.netbsd_i386  "-DUSE_AUDIO" and 
+#If you want sound add to DEFS.netbsd  "-DUSE_AUDIO" and 
 #set STIM=-DUSE_TIMER above
 #
-DEFS.netbsd_i386   = -DX86_ASM -DLSB_FIRST -DUNIX -Dnetbsd_i386 -DNETBSD \
+ifeq (${MACHINE},i386)
+DEFS.netbsd   = -DX86_ASM -DLSB_FIRST -DUNIX -DNETBSD \
 		-DHAVE_GETTIMEOFDAY -DUSE_AUDIO -DSIGNED_SAMPLES
-LIBS.netbsd_i386   = $(X11LIB) -lX11 -lXext -lm
-CFLAGS.netbsd_i386 = $(X11INC) -m486 -fstrength-reduce -funroll-loops \
+else
+DEFS.netbsd   =	-DLSB_FIRST -DUNIX -DNETBSD \
+		-DHAVE_GETTIMEOFDAY -DUSE_AUDIO -DSIGNED_SAMPLES
+endif
+LIBS.netbsd   = $(X11LIB) -lX11 -lXext -lm
+CFLAGS.netbsd = $(X11INC) -O3 -fstrength-reduce -funroll-loops \
 		-fomit-frame-pointer -Wall
-INST.netbsd_i386   = doinstall
+INST.netbsd   = doinstall
 
 # SunOS
 #####################
