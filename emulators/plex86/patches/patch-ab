$NetBSD: patch-ab,v 1.3 2001/01/07 14:44:19 tron Exp $

--- user/plugins/bochs/iodev/harddrv.cc.orig	Wed Jan  3 13:50:13 2001
+++ user/plugins/bochs/iodev/harddrv.cc	Sun Jan  7 12:11:02 2001
@@ -313,14 +313,14 @@
               }
             else { /* read next one into controller buffer */
               unsigned long logical_sector;
-              loff_t ret;
+              off_t ret;
 
               BX_SELECTED_CONTROLLER.status.drq = 1;
               BX_SELECTED_CONTROLLER.status.seek_complete = 1;
 
 	      logical_sector = calculate_logical_address();
 
-	      ret = BX_SELECTED_HD.hard_drive->lseek((loff_t)logical_sector * 512, SEEK_SET);
+	      ret = BX_SELECTED_HD.hard_drive->lseek((off_t)logical_sector * 512, SEEK_SET);
 
               if (ret == -1)
                 bx_panic("disk: could lseek() hard drive image file\n");
@@ -668,11 +668,11 @@
           /* if buffer completely writtten */
           if (BX_SELECTED_CONTROLLER.buffer_index >= 512) {
             unsigned long logical_sector;
-            loff_t ret;
+            off_t ret;
 
 	    logical_sector = calculate_logical_address();
 
-	    ret = BX_SELECTED_HD.hard_drive->lseek((loff_t)logical_sector * 512, SEEK_SET);
+	    ret = BX_SELECTED_HD.hard_drive->lseek((off_t)logical_sector * 512, SEEK_SET);
             if (ret == -1)
               bx_panic("disk: could lseek() hard drive image file\n");
 
@@ -1293,7 +1293,7 @@
 
 	  logical_sector = calculate_logical_address();
 
-	  ret = BX_SELECTED_HD.hard_drive->lseek((loff_t)logical_sector * 512, SEEK_SET);
+	  ret = BX_SELECTED_HD.hard_drive->lseek((off_t)logical_sector * 512, SEEK_SET);
 
           if (ret == -1) {
             bx_panic("disk: could not lseek() hard drive image file\n");
@@ -2307,7 +2307,7 @@
       }
 }
 
-loff_t default_image_t::lseek (loff_t offset, int whence)
+off_t default_image_t::lseek (off_t offset, int whence)
 {
       return pluginWCLSeek(fd, offset, whence);
 }
