$NetBSD: patch-ah,v 1.2 1998/08/07 11:10:01 agc Exp $

--- /tmp/src/sdr.tcl	Tue Jan 20 22:04:15 1998
+++ src/sdr.tcl	Wed Jun 17 16:05:59 1998
@@ -2,6 +2,7 @@
 #Copyright University College London 1995, 1996
 #see ui_fns.c for information on usage and redistribution of this file
 #and for a DISCLAIMER OF ALL WARRANTIES.
+#changes for record C.Fleck 12/97
 
 set initWait 400
 set last_widget foo
@@ -584,9 +585,9 @@
 	  set interval [parse_rpt_time [lindex $repeat($i,$r) 0]]
 	  if {$interval>0} {
 	      set duration [parse_rpt_time [lindex $repeat($i,$r) 1]]
-	      # If the duration is longer than or equal to the interval, then it
+	      # If the duration is longer than the interval, then it
 	      # effectively means "the whole time".
-	      if {$duration >= $interval} {
+	      if {$duration > $interval} {
 		  # XXX
 		  # Need to increment the start of the session by the
 		  # first offset if it's not 0.
@@ -1155,11 +1156,7 @@
 after 120000 timeout_expired_sessions
 
 proc popdown {aid} {
-    global ldata
     set wname .desc$aid
-    global [set wname].f.visible
-    unset [set wname].f.visible
-    set $ldata($aid,is_popped) -1
     highlight_tag $aid popdown
     catch "destroy $wname"
     update
@@ -1956,10 +1953,10 @@
 	  start_recorder $aid $file $rname
 	  destroy .record
 	} else {
-	  timedmsgpopup [tt "Recording Prepared"] \
-	      "[tt "The recording will start at "$ldata($aid,tfrom)" 6000
+# C.Fleck
+          timedmsgpopup [tt "Recording Prepared"] "" 3000
+# end
 	  msgpopup [tt "Error"] [tt "feature is not yet implemented - sorry"]
-	  
 	  destroy .record
 	}
     }
@@ -3130,7 +3127,7 @@
 	    incr mon -12
 	    incr year
 	}
-#	set cal [exec cal $mon $year]
+	set cal [exec cal $mon $year]
 	.cal.f0.c addtag mon$i withtag \
 	    [.cal.f0.c create text [expr $i*$fw*32] 0 -anchor nw\
              -fill $fg -font $font]
--- /tmp/src/new.tcl	Tue May 13 01:00:32 1997
+++ src/new.tcl	Wed Jun 17 16:00:59 1998
@@ -3,6 +3,7 @@
 #new.tcl Copyright (c) 1995 University College London
 #see ui_fns.c for information on usage and redistribution of this file
 #and for a DISCLAIMER OF ALL WARRANTIES.
+#changes for scopes scrollbar C.Fleck 12/97
 
 proc new {aid} {
     global ifstyle ldata
@@ -380,8 +381,15 @@
     pack .new.f3.admin.l -side top -anchor w
     frame .new.f3.admin.f -relief sunken -borderwidth 1
     pack .new.f3.admin.f -side top -fill both -expand true
-    text .new.f3.admin.f.lb -width 15 -height 6 -relief flat -wrap none
+# C.Fleck
+    text .new.f3.admin.f.lb -width 35 -height 5 -relief flat\
+         -relief sunken -borderwidth 1 -yscroll ".new.f3.admin.f.sb set" \
+         -highlightthickness 0
+    scrollbar .new.f3.admin.f.sb -borderwidth 1 -command ".new.f3.admin.f.lb yview" \
+         -highlightthickness 0
+    pack .new.f3.admin.f.sb -side right -fill y -expand true
     pack .new.f3.admin.f.lb -side top -fill both -expand true
+# end
     for {set i 0} {$i < $zone(no_of_zones)} {incr i} {
 	.new.f3.admin.f.lb insert [expr $i+1].0 "$zone(name,$i)"
 	.new.f3.admin.f.lb tag add line$i [expr $i+1].0 end-1c
@@ -431,7 +439,9 @@
 
 Specify the smallest scope that will reach the people you want to communicate with."]
 
-    label .new.f3.rr.l -text [tt "Scope"]
+# C.Fleck
+    label .new.f3.rr.l -text [tt "Scope:"]
+# end
     radiobutton .new.f3.rr.r1 -relief flat -text [tt "Site"] -variable ttl\
 	-highlightthickness 0 \
 	-value 15 -command {disable_scope_entry 15}
