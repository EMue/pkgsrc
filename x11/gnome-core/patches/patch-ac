$NetBSD: patch-ac,v 1.3 1999/01/16 05:39:42 tron Exp $

--- applets/modemlights/modemlights.c.orig	Wed Jan 13 00:44:49 1999
+++ applets/modemlights/modemlights.c	Sat Jan 16 06:07:41 1999
@@ -226,21 +226,24 @@
 	struct 	ppp_stats stats;
 
 	memset(&ifreq, 0, sizeof(ifreq));
-#ifndef __FreeBSD__
-	strncpy(ifreq.ifr_ifrn.ifrn_name, device_name, IFNAMSIZ);
-#else
+#if (defined(BSD) && BSD >= 199506) || defined(__NetBSD__)
 	strncpy(ifreq.ifr_name, device_name, IFNAMSIZ);
+#else
+	strncpy(ifreq.ifr_ifrn.ifrn_name, device_name, IFNAMSIZ);
 #endif /* __FreeBSD__ */
 	ifreq.ifr_ifru.ifru_data = (caddr_t)&stats;
-#ifndef __FreeBSD__
+#if defined(__FreeBSD__)
+	if ((ioctl(ip_socket,SIOCGPPPSTATS,(caddr_t)&ifreq) < 0))
+#else
+#if defined(__NetBSD__)
+	if ((ioctl(ip_socket,SIOCGIFFLAGS,(caddr_t)&ifreq) < 0))
+#else
 #ifdef SIOCDEVPRIVATE
 	if ((ioctl(ip_socket,SIOCDEVPRIVATE,(caddr_t)&ifreq) < 0))
 #else
-	*in = *out = 0;
-	return FALSE;
+	if (0)
 #endif
-#else
-		if ((ioctl(ip_socket,SIOCGPPPSTATS,(caddr_t)&ifreq) < 0))
+#endif /* NetBSD */
 #endif /* __FreeBSD__ */
 			{
 				/* failure means ppp is not up */
