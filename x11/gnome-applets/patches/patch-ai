$NetBSD: patch-ai,v 1.1 2000/07/30 08:08:14 jlam Exp $

--- configure.in.orig	Wed May 31 00:02:31 2000
+++ configure.in	Sun Jul 30 02:33:10 2000
@@ -97,14 +97,24 @@
   AC_MSG_WARN([*** \`cdplayer' applet will not be built ***])
 fi
 
+dnl battery
+case "$host_os" in
+netbsd*)
+  AC_CHECK_HEADERS(machine/apmvar.h, AC_DEFINE(NETBSD_APM))
+  ;;
+esac
+
 dnl mixer
 P_MIXER=
+MIXER_LIBS=
 AC_CHECK_HEADERS(linux/soundcard.h,[P_MIXER=mixer],[
   AC_CHECK_HEADERS(machine/soundcard.h, [P_MIXER=mixer],[
     AC_CHECK_HEADERS(sys/soundcard.h, [P_MIXER=mixer],[
-      AC_CHECK_HEADERS(sys/audioio.h, [P_MIXER=mixer],[
-        AC_CHECK_HEADERS(sys/audio.io.h, [P_MIXER=mixer],[
-          AC_CHECK_HEADERS(sun/audioio.h, [P_MIXER=mixer]) ]) ]) ]) ]) ])
+      AC_CHECK_HEADERS(soundcard.h, [P_MIXER=mixer; MIXER_LIBS="-lossaudio"],[
+        AC_CHECK_HEADERS(sys/audioio.h, [P_MIXER=mixer],[
+          AC_CHECK_HEADERS(sys/audio.io.h, [P_MIXER=mixer],[
+            AC_CHECK_HEADERS(sun/audioio.h, [P_MIXER=mixer]) ]) ]) ]) ]) ]) ])
+AC_SUBST(MIXER_LIBS)
 
 AM_CONDITIONAL(APPLET_MIXER, test "$P_MIXER" = "mixer")
 if test "$P_MIXER" != "mixer"; then
