$NetBSD: patch-ai,v 1.2 2000/07/30 09:33:52 jlam Exp $

--- configure.in.orig	Wed May 31 00:02:31 2000
+++ configure.in	Sun Jul 30 04:22:11 2000
@@ -87,6 +87,7 @@
 case "$host" in
 *irix*) CDROM_HOST=iric; CDROM_LIBS="-lcdaudio -lmediad -lds";;
 *linux*) CDROM_HOST=linux;;
+*netbsd*) CDROM_HOST=netbsd;;
 *solaris*) CDROM_HOST=solaris;;
 esac
 AM_CONDITIONAL(APPLET_CDPLAYER, test -n "$CDROM_HOST")
@@ -97,14 +98,24 @@
   AC_MSG_WARN([*** \`cdplayer' applet will not be built ***])
 fi
 
+dnl battery
+case "$host_os" in
+netbsd*)
+  AC_CHECK_HEADERS(machine/apmvar.h, AC_DEFINE(NETBSD_APM))
+  ;;
+esac
+
 dnl mixer
 P_MIXER=
+MIXER_LIBS=
 AC_CHECK_HEADERS(linux/soundcard.h,[P_MIXER=mixer],[
   AC_CHECK_HEADERS(machine/soundcard.h, [P_MIXER=mixer],[
     AC_CHECK_HEADERS(sys/soundcard.h, [P_MIXER=mixer],[
-      AC_CHECK_HEADERS(sys/audioio.h, [P_MIXER=mixer],[
-        AC_CHECK_HEADERS(sys/audio.io.h, [P_MIXER=mixer],[
-          AC_CHECK_HEADERS(sun/audioio.h, [P_MIXER=mixer]) ]) ]) ]) ]) ])
+      AC_CHECK_HEADERS(soundcard.h, [P_MIXER=mixer; MIXER_LIBS="-lossaudio"],[
+        AC_CHECK_HEADERS(sys/audioio.h, [P_MIXER=mixer],[
+          AC_CHECK_HEADERS(sys/audio.io.h, [P_MIXER=mixer],[
+            AC_CHECK_HEADERS(sun/audioio.h, [P_MIXER=mixer]) ]) ]) ]) ]) ]) ])
+AC_SUBST(MIXER_LIBS)
 
 AM_CONDITIONAL(APPLET_MIXER, test "$P_MIXER" = "mixer")
 if test "$P_MIXER" != "mixer"; then
