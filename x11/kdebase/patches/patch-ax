$NetBSD: patch-ax,v 1.1 1999/10/08 15:55:08 bouyer Exp $

diff -u kfm/kbind.cpp.orig kfm/kbind.cpp
--- kfm/kbind.cpp.orig	Tue Oct  5 22:10:13 1999
+++ kfm/kbind.cpp	Tue Oct  5 23:16:57 1999
@@ -644,11 +644,12 @@
 			    _pixlist.append( emptyPixmap );
 			}
 		    }			
-
+#ifndef __NetBSD__
 		    // Add default mount binding
 		    QString s( i18n( "Mount" ) );
 		    _list.append( s.data() );   
 		    _pixlist.append( emptyPixmap );
+#endif
 		}
 		else
 		{
@@ -1948,7 +1949,7 @@
 		KIOJob * job = new KIOJob();
 		// job->unmount( point.data() );
 		// Patch ( unmount the device )
-		job->unmount( dev.data() );
+		job->unmount( dev.data(), point.data() );
 		delete config;
 		return TRUE;
 	    }
@@ -2001,12 +2002,17 @@
 		else
 		{
 		    QString readonly = config->readEntry( "ReadOnly" );
+		    QString fstype = config->readEntry( "FSType" );
 		    bool ro = FALSE;
 		    if ( !readonly.isNull() )
 			if ( readonly == '1' )
 			    ro = true;
-		    
+
+#ifdef __NetBSD__		    
+		    (void) new KFMAutoMount( ro, fstype, dev, point );
+#else
 		    (void) new KFMAutoMount( ro, 0L, dev, 0L );
+#endif
 
 		    delete config;
 		    return TRUE;
