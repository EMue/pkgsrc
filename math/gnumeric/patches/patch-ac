$NetBSD: patch-ac,v 1.3 2000/10/15 17:38:56 rh Exp $

--- src/dialogs/dialog-cell-format.c.orig	Wed Jun 14 01:07:21 2000
+++ src/dialogs/dialog-cell-format.c
@@ -1158,17 +1158,20 @@
 		return;
 
 	if (state->enable_edit && font_sel->size >= 1.) {
-		GnomeFont const * const gnome_font = gnome_display_font->gnome_font;
-		char const * const family_name = gnome_font->fontmap_entry->familyname;
-
-		mstyle_set_font_name   (state->result, family_name);
-		mstyle_set_font_size   (state->result, font_sel->size);
-		mstyle_set_font_bold   (state->result,
-					gnome_font->fontmap_entry->weight_code >=
-					GNOME_FONT_BOLD);
-		mstyle_set_font_italic (state->result, gnome_font->fontmap_entry->italic);
-
-		fmt_dialog_changed (state);
+ 	  const GnomeFont *gnome_font = 
+ 	    gnome_display_font_get_font(gnome_display_font);
+ 	  char const * const family_name = 
+ 	    gnome_font_get_family_name(gnome_font);
+  
+ 	  mstyle_set_font_name   (state->result, family_name);
+ 	  mstyle_set_font_size   (state->result, font_sel->size);
+ 	  mstyle_set_font_bold   (state->result,
+ 				  gnome_font_get_weight_code(gnome_font) >=
+ 				  GNOME_FONT_BOLD);
+ 	  mstyle_set_font_italic (state->result, 
+ 				  gnome_font_is_italic(gnome_font));
+ 	  
+ 	  fmt_dialog_changed (state);
 	}
 }
 
