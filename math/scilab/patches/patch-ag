$NetBSD: patch-ag,v 1.3 1999/12/22 13:25:42 dmcmahill Exp $

--- ./configure.in.orig	Tue Dec 14 06:57:17 1999
+++ ./configure.in	Tue Dec 21 17:29:53 1999
@@ -795,5 +795,5 @@
      fi
    else		
-     AC_CHECK_PROGS(F77,f77 f2c-f77,no)
+     AC_CHECK_PROGS(F77,"${FC}" f77 f2c-f77,no)
      if test "$F77" = no; then
        AC_MSG_ERROR([Unable to configure: Fortran, f77 or f2c-f77, compiler not found])
@@ -801,5 +801,5 @@
    fi
  
-   FC=$F77
+   FC="$F77"
    FC_OPTIONS='-O2'
    FC_LDFLAGS="-Wl,-R${X11BASE}/lib"
@@ -1055,21 +1055,30 @@
 PVMSCILIB=
 PVMTARGET=pvm-bidon
+PVMROOT=
 
 if test "$with_pvm" != no; then
+#check for a locally installed PVM
+if test -x $PVM_ROOT/lib/pvmgetarch ; then
+  PVMROOT=$PVM_ROOT
+  PVMTARGET=pvm-bidon
+else
+  PVMROOT="$SCIDIR/pvm3"
+  PVMTARGET=scilex-lib
+fi
 
 AC_CACHE_CHECK("for PVM architecture",ac_cv_PVM_arch,
 [
-ac_cv_PVM_arch=`./pvm3/lib/pvmgetarch`
+ac_cv_PVM_arch=`$PVMROOT/lib/pvmgetarch`
 ])
 if test "$ac_cv_PVM_arch" = UNKNOWN; then
   AC_MSG_WARN("PVM unable to find architecture: I will not use PVM")
+  PVMTARGET=pvm-bidon
 else
   AC_DEFINE(WITH_PVM)
   PVMARCH="$ac_cv_PVM_arch"
-  PVMGLIB="\$(SCIDIR)/pvm3/lib/$ac_cv_PVM_arch/libgpvm3.a"
-  PVMLIB="\$(SCIDIR)/pvm3/lib/$ac_cv_PVM_arch/libpvm3.a"
+  PVMGLIB="$PVMROOT/lib/$ac_cv_PVM_arch/libgpvm3.a"
+  PVMLIB="$PVMROOT/lib/$ac_cv_PVM_arch/libpvm3.a"
   PVMSCIDIR=pvm
   PVMSCILIB="\$(SCIDIR)/libs/pvm.a"
-  PVMTARGET=scilex-lib
 fi
 
@@ -1157,5 +1166,5 @@
 echo "configuration of libtool"
 
-AM_PROG_LIBTOOL
+#AM_PROG_LIBTOOL
 
 echo "end of configuration of libtool"
@@ -1208,4 +1217,5 @@
 AC_SUBST(PVMGLIB)
 AC_SUBST(PVMTARGET)
+AC_SUBST(PVMROOT)
 AC_SUBST(TK_INC_PATH)
 AC_SUBST(TCL_INC_PATH)
