$NetBSD: patch-ac,v 1.3 2001/05/22 11:37:16 wiz Exp $

--- main.c.orig	Sun Jan 22 01:21:08 1995
+++ main.c
@@ -18,6 +18,10 @@
 
 #include <stdio.h>
 #include <fcntl.h>
+#if defined(__FreeBSD__) || defined(__NetBSD__)
+#include <locale.h>
+#include <ctype.h>
+#endif
 #include "config.h"
 #include "w.h"
 #include "tty.h"
@@ -186,6 +190,20 @@
 #else
  run=namprt(argv[0]);
 #endif 
+
+#if defined(__FreeBSD__) || defined(__NetBSD__)
+ setlocale(LC_ALL, "");
+ for(c=0;c<256;c++)
+  { int a=0;
+    if(iscntrl(c))
+     a|=UNDERLINE;
+    if((c&0x80)&&!isprint(c))
+     a|=INVERSE;
+    xlata[c]=a;
+    if(isprint(c))
+     xlatc[c]=c;
+  }
+#endif
 
  if(s=getenv("LINES")) sscanf(s,"%d",&lines);
  if(s=getenv("COLUMNS")) sscanf(s,"%d",&columns);
