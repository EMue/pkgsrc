$NetBSD: patch-ab,v 1.3 2001/05/22 11:37:16 wiz Exp $

--- b.c.orig	Fri Jan 20 09:38:25 1995
+++ b.c
@@ -1928,7 +1928,7 @@
  if(s[0]=='!') pclose(f);
  else
 #endif
- if(zcmp(s,"-")) fclose(f);
+ if(zcmp(s,"-")) { if (fclose(f)) return error = -5; }
  else fflush(f);
 
  opnerr:;
