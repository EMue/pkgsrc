# $NetBSD: Makefile,v 1.23 2001/02/17 17:37:28 wiz Exp $
# FreeBSD Id: Makefile,v 1.21 1997/08/13 23:29:52 jmz Exp
#

DISTNAME=	ispell-3.1.20
WRKSRC=		${WRKDIR}/ispell-3.1
CATEGORIES=	textproc
MASTER_SITES=	ftp://ftp.cs.ucla.edu/pub/ispell-3.1/
# don't remove this.  it's appended to if other languages are specified
DISTFILES=	ispell-3.1.20.tar.gz

MAINTAINER=	packages@netbsd.org
HOMEPAGE=	http://www.gnu.org/software/ispell/ispell.html
COMMENT=	Interactive spelling checker

MAKE_FLAGS=	TMPDIR=${WRKDIR}
SCRIPTS_ENV=	"LANG=${ISPELL_LANG}"

USE_GTEXINFO=	yes
INFO_FILES=	ispell.info

.if exists(/usr/include/inttypes.h)
CFLAGS+=	-DHAVE_INTTYPES_H
.endif

BUILD_DEFS+=	ISPELL_EXTRA_DICT ISPELL_FR ISPELL_LANG

.include "../../mk/bsd.prefs.mk"

.ifdef ISPELL_FR
ISPELL_EXTRA_DICT=	francais-IREQ-1.4.tar.gz
MASTER_SITES+=	ftp://ftp.robot.ireq.ca/pub/ispell/
DISTFILES+=	${ISPELL_EXTRA_DICT}
.endif

pre-extract:
.ifndef ISPELL_LANG
	@${ECHO} '*******************************************************'
	@${ECHO} '* Note that you can build a british version by        *'
	@${ECHO} '* typing "${MAKE} british" following a "${MAKE} clean"*'
	@${ECHO} '* Note that you can build a french/english version    *'
	@${ECHO} '* by typing "${MAKE} french"                          *'
	@${ECHO} '*******************************************************'
.endif

pre-configure:
.if defined(ISPELL_EXTRA_DICT)
	@${ECHO} ${ISPELL_EXTRA_DICT} > ${WRKDIR}/extra_dict
.endif

post-configure:
	@${ECHO} "#define CFLAGS \"${CFLAGS}\"" >> ${WRKSRC}/local.h

british:
	@${ECHO} "Okay, making a british version of ispell...."
	@${MAKE} ${.MAKEFLAGS} ISPELL_LANG=british all

french:
	@${ECHO} "Okay, making a french/english version of ispell...."
	@${MAKE} ${.MAKEFLAGS} ISPELL_FR=yes

.include "../../mk/bsd.pkg.mk"
