$NetBSD: patch-ab,v 1.4 1999/02/14 21:14:04 tron Exp $

--- ltmain.sh.orig	Fri Mar 20 09:00:29 1998
+++ ltmain.sh	Sun Feb 14 21:19:14 1999
@@ -144,6 +144,10 @@
     prev=execute_dlfiles
     ;;
 
+  --install-la) install_la="yes" ;;
+
+  --cplusplus) cplusplus="yes" ;;
+
   -*)
     $echo "$modename: unrecognized option \`$arg'" 1>&2
     $echo "$help" 1>&2
@@ -216,6 +233,11 @@
   generic_help="$help"
   help="Try \`$modename --help --mode=$mode' for more information."
 
+  # Are we linking a C++ library?
+  if test -n "$cplusplus" && test -n "$cpprt0"; then
+    archive_cmds="$archive_cmds $cpprt0"
+  fi
+
   # These modes are in order of execution frequency so that they run quickly.
   case "$mode" in
   # libtool compile mode
@@ -1655,6 +1677,10 @@
       -g) prev="-g" ;;
       -m) prev="-m" ;;
       -o) prev="-o" ;;
+# Next three options added by Julio Sanchez to support INN installs
+      -b) prev="-b" ;;
+      -O) prev="-O" ;;
+      -G) prev="-G" ;;
       -s)
         stripme=" -s"
         continue
@@ -1841,10 +1867,12 @@
           IFS="$save_ifs"
         fi
 
+if test -n "$install_la"; then
         # Install the pseudo-library for information purposes.
         name=`$echo "X$file" | $Xsed -e 's%^.*/%%'`
         $show "$install_prog $file $destdir/$name"
         $run eval "$install_prog $file $destdir/$name" || exit $?
+fi
 
         # Maybe install the static library, too.
         test -n "$old_library" && staticlibs="$staticlibs $dir/$old_library"
@@ -1912,6 +1940,7 @@
             exit 1
           fi
 
+if test -n "$install_la"; then
           finalize=yes
           for lib in $link_against_libtool_libs; do
             # Check to see that each library is installed.
@@ -1932,6 +1961,7 @@
               finalize=no
             fi
           done
+fi
 
           if test "$hardcode_action" = relink; then
             if test "$finalize" = yes; then
