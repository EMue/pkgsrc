/*	$NetBSD: xpkgwedge.def,v 1.3 2000/10/23 17:32:08 jlam Exp $	*/

#ifdef AfterVendorCF

/*
 * The following defines inject a "PREFIX=" make-time option that lets the
 * user twiddle the ProjectRoot setting with a single switch.  This makes
 * the command "make PREFIX=/path/to/install all install" work as expected.
 *
 * Note that ?= is a special Pmake construct and probably will not work on
 * other makes.
 */

#ifndef ProjectRoot
/*
 * Assume the worst:  this should not happen in practice, as this setup
 * does not work with the classical /usr/{include,lib}/X11 layout.
 */
#define ProjectRoot /usr/X11
#endif

PREFIX ?= ProjectRoot
X11_ROOT = ProjectRoot

#undef ProjectRoot
#define ProjectRoot $(PREFIX)
#undef ConfigDir
#define ConfigDir $(X11_ROOT)/lib/X11/config

/*
 * This emits dual -I and -L options to cc automatically, one for the actual
 * X11 root, and one for the user-set prefix.
 */
#define X11ProjectRoot $(X11_ROOT)

#ifdef UseInstalled
/*
 *  We need to redefine ImakeCmd so that imake will look in
 *  $(PREFIX)/lib/X11/config *before* looking in the standard X
 *  config directory to override any configurate files installed
 *  there.
 */
#undef ImakeCmd
#define ImakeCmd imake -I$(PREFIX)/lib/X11/config
#endif

#endif
