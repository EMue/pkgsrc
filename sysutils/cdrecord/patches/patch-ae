$NetBSD: patch-ae,v 1.1 1999/10/09 20:51:41 mycroft Exp $

--- include/vadefs.h.orig	Sun Mar  1 15:38:45 1998
+++ include/vadefs.h	Sat Oct  9 13:47:40 1999
@@ -37,8 +37,8 @@
 #	include <varargs.h>
 #endif
 
-#if (defined(__linux__) || defined(__linux) || defined(sun)) && \
-			(defined(__ppc) || defined(__PPC) || defined(powerpc))
+#if (defined(__linux__) || defined(__linux) || defined(sun) || defined(__NetBSD__)) && \
+	(defined(__ppc) || defined(__PPC) || defined(powerpc) || defined(__powerpc__))
 
 #	ifndef	VA_LIST_IS_ARRAY
 #	define	VA_LIST_IS_ARRAY
@@ -63,7 +63,11 @@
  * compatibility.
  */
 #if !defined(va_copy) && !defined(HAVE_VA_COPY)
-#	define	va_copy(to, from)	((to) = (from))
+#	ifdef	VA_LIST_IS_ARRAY
+#		define	va_copy(to, from)	((to)[0] = (from)[0])
+#	else
+#		define	va_copy(to, from)	((to) = (from))
+#	endif
 #endif
 
 /*
