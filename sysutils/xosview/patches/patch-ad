$NetBSD: patch-ad,v 1.4 2000/06/27 08:15:51 tron Exp $

--- bsd/kernel.cc.orig	Tue Feb 16 15:09:21 1999
+++ bsd/kernel.cc	Tue Jun 27 10:13:23 2000
@@ -30,6 +30,10 @@
 #include <errno.h>
 #include <sys/dkstat.h>         /*  For CPUSTATES, which tells us how
                                       many cpu states there are.  */
+#if defined(XOSVIEW_NETBSD) && !defined(CPUSTATES)
+#include <sys/sched.h>
+#endif
+
 #ifndef XOSVIEW_FREEBSD
 #include <sys/disk.h>		/*  For disk statistics.  */
 #endif
@@ -67,7 +71,11 @@
 
 #ifdef HAVE_SWAPCTL
 #include <unistd.h>		/*  For swapctl proto.  */
-#include <vm/vm_swap.h>		/*  For swapent, SWAP_*.  */
+#if defined(__NetBSD_Version__) && __NetBSD_Version__ >= 104000000
+#include <sys/swap.h>		/*  For swapent, SWAP_*.  */
+#else
+#include <vm/vm_swap.h>
+#endif
 #include <stdlib.h>		/*  For malloc(), free().  */
 #endif
 
