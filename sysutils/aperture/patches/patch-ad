$NetBSD: patch-ad,v 1.1 2000/07/15 06:11:20 jlam Exp $

--- module/aperture.c.orig	Sat Jul 15 01:15:06 2000
+++ module/aperture.c	Sat Jul 15 01:32:13 2000
@@ -118,11 +118,25 @@
  * allow only section in the vga framebuffer and above main memory 
  * to be mapped
  */
+#if (__NetBSD_Version__ < 105020000)
+/*
+ * Technically, the change to the kernel mmap interface happened
+ * during 1.5A, but after the interface changed, the kernel version
+ * was inexplicably not bumped.  Hence, the test condition is for
+ * 1.5B.
+ */
 int
 xf86mmap(dev, offset, length)
 	dev_t dev;
 	int offset;
 	int length;
+#else
+paddr_t
+xf86mmap(dev, offset, length)
+	dev_t dev;
+	off_t offset;
+	int length;
+#endif /* __NetBSD_Version__ */
 {
 
 #ifdef XF86_DEBUG
