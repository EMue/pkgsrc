$NetBSD: patch-aa,v 1.8 1999/05/05 17:32:45 bad Exp $

--- Configure.orig	Sat Feb 27 16:40:33 1999
+++ Configure	Wed May  5 18:46:07 1999
@@ -1482,6 +1482,9 @@
       1.3*)
 	LSOF_VERS="1030"
 	;;
+      1.4*)
+	LSOF_VERS="1040"
+	;;
       *)
 	echo Unknown NetBSD release: `uname -r`
 	echo Assuming NetBSD 1.0
@@ -1493,7 +1496,7 @@
     # Test for legal NetBSD version.
 
     case $LSOF_VERS in	# {
-    1000|1010|1020|1030)
+    1000|1010|1020|1030|1040)
       ;;
     *)
       echo "Unsupported NetBSD version: $LSOF_VERS"
@@ -1575,7 +1578,13 @@
 	if test $? -eq 0	# {
 	then
 	  NETBSD_UVM="Y"
-	fi	# }
+	else
+	  NETBSD_VM_FAULT=`nm /netbsd | grep 'vm_fault$' | cut -d " " -f 3`
+	  case $NETBSD_VM_FAULT in	# {
+	  *uvm_fault)
+	    NETBSD_UVM="Y";;
+	  esac				# }
+	fi		# }
       fi	# }
     fi	# }
     rm -rf dialects/n+obsd/uvm_include
@@ -2921,7 +2930,7 @@
   then
     echo "AR=	$LSOF_AR" >> ${LSOF_LIB}/$LSOF_LIBMKF
   fi	# }
-  if test "X$LSOF_RANLIB" != "X"	# {
+  if test "X$LSOF_TGT" = "Xsolaris" -o "X$LSOF_RANLIB" != "X"	# {
   then
     echo "RANLIB=	$LSOF_RANLIB" >> ${LSOF_LIB}/$LSOF_LIBMKF
   fi	# }
