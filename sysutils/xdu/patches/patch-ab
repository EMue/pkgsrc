$NetBSD: patch-ab,v 1.1 2000/12/30 00:19:06 joda Exp $

--- xdu.c.orig	Sun Jun  5 21:29:23 1994
+++ xdu.c	Sat Dec 30 00:51:35 2000
@@ -232,7 +232,6 @@
 char *filename;
 {
 	char	buf[4096];
-	char	name[4096];
 	int	size;
 	FILE	*fp;
 
@@ -245,9 +244,12 @@
 		}
 	}
 	while (fgets(buf,sizeof(buf),fp) != NULL) {
-		sscanf(buf, "%d %s\n", &size, name);
-		/*printf("%d %s\n", size, name);*/
-		parse_entry(name,size);
+		char *p, *q = NULL;
+		p = strtok_r(buf, " \t", &q);
+		size = atoi(p);
+		p = strtok_r(NULL, "\r\n", &q);
+		/* printf("%d %s\n", size, p); */
+		parse_entry(p,size);
 	}
 	fclose(fp);
 }
