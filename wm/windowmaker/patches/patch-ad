$NetBSD: patch-ad,v 1.4 2001/06/29 14:28:05 nra Exp $

--- src/main.c.orig	Wed Apr 11 02:14:42 2001
+++ src/main.c	Thu Jun 28 19:01:47 2001
@@ -28,6 +28,7 @@
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <fcntl.h>
+#include <signal.h>
 
 #include <X11/Xlib.h>
 #include <X11/Xutil.h>
@@ -218,6 +219,12 @@
 {
     char *tmp, *ptr;
     char buf[16];
+    struct sigaction sa;
+
+    sa.sa_handler = SIG_DFL;
+    sigemptyset(&sa.sa_mask);
+    sa.sa_mask = 0;
+    sigaction(SIGPIPE, &sa, NULL);
 
     if (multiHead) {
     	tmp = wmalloc(strlen(DisplayName)+64);
