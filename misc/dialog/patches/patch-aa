$NetBSD: patch-aa,v 1.7 2000/10/31 16:26:34 jlam Exp $

--- Makefile.orig	Thu Jan  9 01:19:34 1997
+++ Makefile
@@ -17,8 +17,8 @@
 # can be disabled to make dialog a bit smaller (could be done for more things)
 HAVE_GUAGE=true
 
-BINDIR = /usr/bin
-MANDIR = /usr/man/man1/
+BINDIR = ${PREFIX}/bin
+MANDIR = ${PREFIX}/man/man1
 
 CC = gcc
 CPP = gcc -E
@@ -29,8 +29,8 @@
 #----------------------------------------------------------------------------
 # do not edit below this line
 
-CFLAGS = $(OPTIM) -DLOCALE -DVERSION=\"0.6z\"
-LDFLAGS = -L .
+CFLAGS += $(OPTIM) -DLOCALE -DVERSION=\"0.6z\"
+LDFLAGS += -L . -L${LOCALBASE}/lib
 LDLIBS = -ldialog
 
 OBJS = checklist.o inputbox.o menubox.o msgbox.o \
@@ -42,8 +42,13 @@
 OBJS+=mouse.o
 endif
 ifeq ($(HAVE_NCURSES), true)
-CFLAGS+=-DHAVE_NCURSES -I/usr/include/ncurses
+CFLAGS+=-DHAVE_NCURSES
+endif
+ifeq ($(HAVE_TRUE_NCURSES), true)
+CFLAGS+=-DHAVE_TRUE_NCURSES -I${LOCALBASE}/include
 LDLIBS+=-lncurses
+else
+LDLIBS+=-lcurses
 endif
 ifeq ($(HAVE_RC_FILE), true)
 CFLAGS+=-DHAVE_RC_FILE
@@ -59,7 +64,7 @@
 all: libdialog.a dialog
 
 libdialog.a: $(OBJS)
-	ar rcs libdialog.a $(OBJS)
+	ar rc libdialog.a $(OBJS)
 
 dialog: dialog.o
 
@@ -70,7 +75,7 @@
 include .depend
 
 install: dialog libdialog.a
-	install -s dialog $(BINDIR)
+	${BSD_INSTALL_PROGRAM} dialog $(BINDIR)
 	cp dialog.man dialog.1
 ifeq ($(HAVE_RC_FILE),false)
 	mv dialog.1 dialog.in
@@ -82,7 +87,7 @@
 endif
 	mv dialog.1 dialog.in
 	sed -e "/COMMENTSTART/,/COMMENTEND/d" dialog.in >dialog.1
-	install -m 644 dialog.1 $(MANDIR)
+	${BSD_INSTALL_MAN} dialog.1 $(MANDIR)
 #	install -m 644 libdialog.a /usr/lib/
 
 depend:
