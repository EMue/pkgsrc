--- team.c.orig	Mon Oct 13 13:29:41 1997
+++ team.c	Mon Oct 13 13:33:42 1997
@@ -97,6 +97,10 @@
 # undef F_SETLKW
 #endif
 
+#if (defined(BSD) && BSD >= 199306)
+# undef F_SETLKW
+#endif
+
 #if (PCG)
 # include "Extend.h"
 # include "Here.h"
@@ -107,6 +111,7 @@
 # define fast		register
 # define global     	/* extern */
 # define local		static
+# define When		case
 # define when		break; case
 # define otherwise	break; default
 # define mode(which,name) typedef which name name; which name
@@ -355,7 +360,7 @@
 
   switch (fd->status)
   {
-  when FdEOF:     return 0;
+  When FdEOF:     return 0;
   when FdERROR:   return -1;
   when FdCLOSED:  return -1;
 
@@ -396,7 +401,7 @@
 
   switch (fd->status)
   {
-  when FdEOF:     return 0;
+  When FdEOF:     return 0;
   when FdERROR:   return -1;
   when FdCLOSED:  return -1;
 
@@ -578,7 +583,7 @@
   while ((received = GuyRECEIVE(guy,&token,&status,&done)) && token != TokenSTOP)
   switch (token)
   {
-  when TokenREAD:
+  When TokenREAD:
     FdIn.status = status;
 
     Mesg(("GuyStart reading %d chars\n",bufsize));
@@ -996,7 +1001,7 @@
   while ((opt = getopt(argc,argv,"vri:o:")) != -1)
     switch (opt)
     {
-    when 'i':
+    When 'i':
       isize = atos(optarg);
       if (isize < TeamLVOLSZ || isize > TeamHVOLSZ)
       {
