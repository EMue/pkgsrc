$NetBSD: patch-ad,v 1.6 1999/08/10 09:18:02 agc Exp $

--- configure.orig	Mon Aug  2 13:26:53 1999
+++ configure	Tue Aug 10 10:03:01 1999
@@ -2706,7 +2706,7 @@
 
 _CUT_HERE_
 
-#if ((defined(hp300) && !defined(__hpux)) || defined(sun) || (defined(ultrix) && defined(mips)) || defined(_SEQUENT_) || defined(sgi) || defined(SVR4) || defined(sony_news) || !(defined(__osf__) && defined(__alpha)) || defined(_IBMR2) || defined(_AUX_SOURCE) || defined(AUX) || defined(m88k))
+#if (((defined(hp300) && !defined(__hpux)) || defined(sun) || (defined(ultrix) && defined(mips)) || defined(_SEQUENT_) || defined(sgi) || defined(SVR4) || defined(sony_news) || !(defined(__osf__) && defined(__alpha)) || defined(_IBMR2) || defined(_AUX_SOURCE) || defined(AUX) || defined(m88k))) && !defined(__NetBSD__)
 loadtype=long
 # if defined(apollo) || defined(_IBMR2) || defined(_AUX_SOURCE) || defined(AUX)
 loadscale=65536
@@ -3248,6 +3248,10 @@
 
 echo $ac_n "checking for vsprintf""... $ac_c" 1>&6
 echo "configure:3251: checking for vsprintf" >&5
+vsprintf_endowed=0
+if true; then
+vsprintf_endowed=1
+else
 cat > conftest.$ac_ext <<EOF
 #line 3253 "configure"
 #include "confdefs.h"
@@ -3257,6 +3261,10 @@
 ; return 0; }
 EOF
 if { (eval echo configure:3260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+ vsprintf_endowed=1
+fi
+fi
+if [ "$vsprintf_endowed" = "1" ]; then
   rm -rf conftest*
   echo "$ac_t""yes" 1>&6;cat >> confdefs.h <<\EOF
 #define USEVARARGS 1
