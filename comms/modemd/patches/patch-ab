$NetBSD: patch-ab,v 1.2 1998/08/07 10:36:44 agc Exp $

--- common/ttio.c.orig	Sat Feb 22 00:06:09 1997
+++ common/ttio.c	Tue Mar  3 17:19:06 1998
@@ -73,6 +73,16 @@
     {
       if (chown (nbuf, pw -> pw_uid, pw -> pw_gid) < 0)
 	warn ("Can't set owner on %s: %m", nbuf);
+#ifdef __NetBSD__
+      if (chmod (nbuf, 0600) < 0)
+        warn ("Can't set mode on %s: %m", nbuf);
+      revoke(nbuf);
+      if (ttyaction(nbuf, "modemd", "root"))
+        warn ("Can't ttyaction %s: %m", nbuf);
+
+      /* delay open so DTR stays down long enough to be detected */
+      usleep(100);
+#endif
     }
 
   /* Open the terminal device. */
