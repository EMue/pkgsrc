$NetBSD: patch-ad,v 1.3 1998/08/07 11:13:57 agc Exp $

--- sh.glob.c.orig	Fri Apr 26 15:19:30 1996
+++ sh.glob.c	Tue Aug  4 10:15:41 1998
@@ -85,6 +85,7 @@
 static	void	  pword		__P((int));
 static	void	  psave		__P((int));
 static	void	  backeval	__P((Char *, bool));
+extern  int       collate_range_cmp __P((int, int));
 
 static Char *
 globtilde(nv, s)
@@ -1038,8 +1039,9 @@
 		if (match)
 		    continue;
 		if (rangec == '-' && *(pattern-2) != '[' && *pattern  != ']') {
-		    match = (stringc <= (*pattern & TRIM) &&
-			      (*(pattern-2) & TRIM) <= stringc);
+		    match = (   collate_range_cmp(stringc, *pattern & TRIM) <= 0
+			     && collate_range_cmp(*(pattern-2) & TRIM, stringc) <= 0
+			    );
 		    pattern++;
 		}
 		else 
