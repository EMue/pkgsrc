$NetBSD: patch-aa,v 1.9 1998/11/09 01:25:13 fvdl Exp $
*** network/main/prefetch.c.orig	Thu Oct  8 22:24:29 1998
--- network/main/prefetch.c	Sat Nov  7 20:02:13 1998
***************
*** 76,82 ****
  /*	Returns bool to indicate if its OK to prefetch the specified URL.
  	we don't prefetch mailto:, file:, etc. 
  */
! PRIVATE Bool
  pre_OKToPrefetch(char* url)
  {
  	int type;
--- 76,82 ----
  /*	Returns bool to indicate if its OK to prefetch the specified URL.
  	we don't prefetch mailto:, file:, etc. 
  */
! MODULE_PRIVATE Bool
  pre_OKToPrefetch(char* url)
  {
  	int type;
***************
*** 101,107 ****
  	return FALSE;
  }
  
! PRIVATE void
  pre_Finished(URL_Struct* url_struct, int status, MWContext* context)
  {
  	/* this should change to update the colors of 
--- 101,107 ----
  	return FALSE;
  }
  
! MODULE_PRIVATE void
  pre_Finished(URL_Struct* url_struct, int status, MWContext* context)
  {
  	/* this should change to update the colors of 
*** nsprpub/config/NetBSD.mk.orig	Thu Oct  8 22:24:51 1998
--- nsprpub/config/NetBSD.mk	Mon Nov  9 01:49:34 1998
***************
*** 44,49 ****
--- 44,51 ----
  
  ARCH			= netbsd
  
+ DLL_SUFFIX		= so.1.0
+ 
  DSO_CFLAGS		= -fPIC
  DSO_LDFLAGS		=
  DSO_LDOPTS		= -Bshareable
***************
*** 55,60 ****
--- 57,66 ----
  endif
  ifeq ($(OS_TEST),pmax)  
  DSO_LDOPTS		= -shared
+ endif
+ 
+ ifdef LIBRUNPATH
+ DSO_LDOPTS		+= -R$(LIBRUNPATH)
  endif
  
  MKSHLIB			= $(LD) $(DSO_LDOPTS)
*** nsprpub/pr/include/md/_netbsd.h.orig	Thu Oct  8 22:25:16 1998
--- nsprpub/pr/include/md/_netbsd.h	Sat Nov  7 20:13:58 1998
***************
*** 48,53 ****
--- 48,55 ----
  #define HAVE_DLL
  #define USE_DLFCN
  #define _PR_HAVE_SOCKADDR_LEN
+ #define _PR_NO_LARGE_FILES
+ #define _PR_STAT_HAS_ST_ATIMESPEC
  
  #define USE_SETJMP
  
*** cmd/xfe/Makefile.orig	Thu Oct  8 22:34:06 1998
--- cmd/xfe/Makefile	Mon Nov  9 01:48:42 1998
***************
*** 749,758 ****
  ifeq ($(OS_ARCH),NetBSD)
  
  # Work around linker semantics that will never find our own libutil on 1.3.x
- ifeq ($(shell uname -r | cut -f2 -d.),3)
  FOOL_GMAKE	= $(EXPORT_LDFLAGS:$(DIST)/lib/lib%.a=-l%)
  DSO_EX_LIBS	= $(FOOL_GMAKE:-lutil=$(DIST)/lib/libutil.a)
- endif
  
  ifdef LIBRUNPATH
  OS_LIBS		+= -R$(LIBRUNPATH)
--- 749,756 ----
*** config/NetBSD.mk.orig	Thu Oct  8 22:28:25 1998
--- config/NetBSD.mk	Mon Nov  9 01:49:13 1998
***************
*** 41,47 ****
  # Don't define BSD, because it's already defined in /usr/include/sys/param.h.
  PLATFORM_FLAGS		= -DNETBSD $(DSO_CFLAGS)
  MOVEMAIL_FLAGS		= -DHAVE_STRERROR
! PORT_FLAGS		= -DSW_THREADS -DNEED_UINT -DHAVE_LCHOWN -DNTOHL_ENDIAN_H -DHAVE_FILIO_H -DNEED_SYS_TIME_H -DNEED_UINT_T -DHAVE_BSD_FLOCK
  PDJAVA_FLAGS		= -mx128m
  OS_GPROF_FLAGS		= -pg
  LD_FLAGS		= -L/usr/X11R6/lib -lXm
--- 41,47 ----
  # Don't define BSD, because it's already defined in /usr/include/sys/param.h.
  PLATFORM_FLAGS		= -DNETBSD $(DSO_CFLAGS)
  MOVEMAIL_FLAGS		= -DHAVE_STRERROR
! PORT_FLAGS		= -DSW_THREADS -DNEED_UINT -DHAVE_LCHOWN -DNTOHL_ENDIAN_H -DHAVE_FILIO_H -DNEED_SYS_TIME_H -DNEED_UINT_T -DHAVE_BSD_FLOCK -DHAVE_SYSERRLIST
  PDJAVA_FLAGS		= -mx128m
  OS_GPROF_FLAGS		= -pg
  LD_FLAGS		= -L/usr/X11R6/lib -lXm
***************
*** 101,104 ****
--- 101,108 ----
  DSO_LDOPTS		= -shared
  else
  DSO_LDOPTS		= -Bshareable
+ endif
+ 
+ ifdef LIBRUNPATH
+ DSO_LDOPTS		+= -R$(LIBRUNPATH)
  endif
