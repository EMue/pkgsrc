$NetBSD: patch-ao,v 1.1 2001/01/16 16:01:23 taya Exp $

diff -ru ../Orig/mozilla/security/psm/server/Makefile ./security/psm/server/Makefile
--- ../Orig/mozilla/security/psm/server/Makefile	Wed Dec 20 10:24:58 2000
+++ ./security/psm/server/Makefile	Mon Jan 15 15:37:55 2001
@@ -42,9 +42,13 @@
 CPLUSPLUSRUNTIME = -L /usr/lib -lstdc++ -lm
 else
 # libC, presumably, is what we must link with elsewhere
+ifeq ($(OS_ARCH), NetBSD)
+CPLUSPLUSRUNTIME = -lm
+else
 CPLUSPLUSRUNTIME = -lC -lm
 endif
 endif
+endif
 
 INCLUDES += -I$(CORE_DEPTH)/../dist/public/nlslayer -I$(CORE_DEPTH)/../dist/include
 
@@ -157,9 +161,14 @@
 NSPR_LINK_LIBS = -L$(DIST)/lib -Bdynamic -lnspr4 -lplc4 -lplds4
 XPCOM_LINK_LIBS = -lxpcom
 XPCOM_LIBS += $(DIST)/lib/libz.$(DLL_SUFFIX)
-else
+else # SunOS
+ifeq ($(OS_ARCH), NetBSD)
+NSPR_LINK_LIBS = -L$(DIST)/lib -lnspr4 -lplc4 -lplds4
+XPCOM_LINK_LIBS = -lxpcom
+else # NetBSD
 NSPR_LINK_LIBS = $(NSPR_LIBS)
 XPCOM_LINK_LIBS	= $(XPCOM_LIBS)
+endif
 endif
 
 ifndef MOZ_DIST
