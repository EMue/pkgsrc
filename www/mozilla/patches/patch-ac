$NetBSD: patch-ac,v 1.10 2000/08/16 21:23:49 tron Exp $

--- nsprpub/config/NetBSD.mk.orig	Thu Jul  6 23:04:45 2000
+++ nsprpub/config/NetBSD.mk	Wed Aug 16 22:16:56 2000
@@ -56,12 +56,17 @@
 
 DSO_CFLAGS		= -fPIC -DPIC
 DSO_LDFLAGS		=
-DSO_LDOPTS		= -x -shared
+DSO_LDOPTS		= -shared
+ifeq ($(OBJECT_FMT),ELF)
+DSO_LDOPTS		+=-Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
+endif
 
 ifdef LIBRUNPATH
-DSO_LDOPTS		+= -R$(LIBRUNPATH)
+#DSO_LDOPTS		+= -R$(LIBRUNPATH)
+DSO_LDOPTS		+= -Wl,-R$(LIBRUNPATH)
 endif
 
-MKSHLIB			= $(LD) $(DSO_LDOPTS)
+#MKSHLIB			= $(LD) $(DSO_LDOPTS)
+MKSHLIB			= $(CC) $(DSO_LDOPTS)
 
 G++INCLUDES		= -I/usr/include/g++
