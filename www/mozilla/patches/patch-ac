$NetBSD: patch-ac,v 1.12 2000/10/14 09:24:46 martin Exp $

diff -ru /usr/local/src/mozilla/nsprpub/config/NetBSD.mk ./nsprpub/config/NetBSD.mk
--- /usr/local/src/mozilla/nsprpub/config/NetBSD.mk	Fri Jul  7 06:04:45 2000
+++ ./nsprpub/config/NetBSD.mk	Fri Oct 13 11:23:07 2000
@@ -56,12 +56,17 @@
 
 DSO_CFLAGS		= -fPIC -DPIC
 DSO_LDFLAGS		=
-DSO_LDOPTS		= -x -shared
+DSO_LDOPTS		= -shared
+ifeq ($(OBJECT_FMT),ELF)
+DSO_LDOPTS		+=-Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
+endif
 
 ifdef LIBRUNPATH
-DSO_LDOPTS		+= -R$(LIBRUNPATH)
+#DSO_LDOPTS		+= -R$(LIBRUNPATH)
+DSO_LDOPTS		+= -Wl,-R$(LIBRUNPATH)
 endif
 
-MKSHLIB			= $(LD) $(DSO_LDOPTS)
+#MKSHLIB			= $(LD) $(DSO_LDOPTS)
+MKSHLIB			= $(CC) $(DSO_LDOPTS)
 
 G++INCLUDES		= -I/usr/include/g++
