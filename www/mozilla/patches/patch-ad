$NetBSD: patch-ad,v 1.11 2000/10/23 17:40:07 mycroft Exp $

--- nsprpub/pr/include/md/_netbsd.h.orig	Mon Oct 23 17:05:49 2000
+++ nsprpub/pr/include/md/_netbsd.h	Mon Oct 23 15:58:45 2000
@@ -70,8 +70,10 @@
 
 #define CONTEXT(_th) ((_th)->md.context)
 
-#if defined(__i386__) || defined(__sparc__) || defined(__m68k__) || defined(__powerpc__)
+#if defined(__i386__) || defined(__sparc__) || defined(__m68k__)
 #define JB_SP_INDEX 2
+#elif defined(__powerpc__)
+#define JB_SP_INDEX 3
 #elif defined(__mips__)
 #define JB_SP_INDEX 4
 #elif defined(__alpha__)
@@ -101,7 +103,7 @@
     if (sigsetjmp(CONTEXT(_thread), 1)) {  \
         _main();  \
     }  \
-    _MD_GET_SP(_thread) = (unsigned char*) ((_sp) - 64); \
+    _MD_GET_SP(_thread) = (unsigned char*) ((_sp) - 128); \
 }
 
 #define _MD_SWITCH_CONTEXT(_thread)  \
