$NetBSD: patch-aa,v 1.2 1999/05/14 22:05:23 tron Exp $

*** Count-config.orig	Tue May 11 19:44:15 1999
--- Count-config	Tue May 11 19:44:31 1999
***************
*** 20,26 ****
  trap 'echo '';echo "Interrupt detected..exiting";rm -f "./Config.tmpl" 2>/dev/null;rm -f "./.alfcf" ;rm -f "./strict" 2>/dev/null;echo '';exit 1' 1 2 3 15
  
  Tmpl="./Config.tmpl"
! CgiBinDir="/usr/local/etc/httpd/cgi-bin"
  
  if [ ! -f "./VERSION" ] 
  then
--- 20,26 ----
  trap 'echo '';echo "Interrupt detected..exiting";rm -f "./Config.tmpl" 2>/dev/null;rm -f "./.alfcf" ;rm -f "./strict" 2>/dev/null;echo '';exit 1' 1 2 3 15
  
  Tmpl="./Config.tmpl"
! CgiBinDir="${PREFIX}/libexec/cgi-bin"
  
  if [ ! -f "./VERSION" ] 
  then
***************
*** 35,51 ****
  
  AUTHOR="ma_muquit@fccc.edu"
  Version=`cat ./VERSION`
- Basedir="wwwcount$Version"
  ConfigH="src/config.h"
! BaseDir="/usr/local/etc/Counter"
! ConfigDir="$BaseDir/conf"
! ConfFile="count.cfg"
! DigitDir="$BaseDir/digits"
! DataDir="$BaseDir/data"
! LogDir="$BaseDir/logs"
- ext=`echo $Version | sed 's/\./_/g'`
! LogFile="Count$ext.log"
! RgbFile="./data/rgb.txt"
  
  #
  # from php/fis install script
--- 35,50 ----
  
  AUTHOR="ma_muquit@fccc.edu"
  Version=`cat ./VERSION`
  ConfigH="src/config.h"
! BaseDir="${PREFIX}/etc"
+ LibDir="${PREFIX}/libdata/wwwcount"
! ConfigDir="${PREFIX}/etc"
! ConfFile="wwwcount.conf"
! DigitDir="$LibDir/digits"
! DataDir="${PREFIX}/var/db/wwwcount"
! LogDir="${PREFIX}/var/log"
! LogFile="wwwcount"
! RgbFile="rgb.txt"
  
  #
  # from php/fis install script
***************
*** 118,124 ****
  
  if [ .$answer = . ]
  then
!     answer=x
  fi
      until [ $answer = "y" -o $answer = "Y" -o $answer = "n" -o $answer = "N" ]
      do
--- 119,125 ----
  
  if [ .$answer = . ]
  then
!     answer=y
  fi
      until [ $answer = "y" -o $answer = "Y" -o $answer = "n" -o $answer = "N" ]
      do
***************
*** 377,383 ****
  
  if [ .$answer = . ]
  then
!     answer=x
  fi
      until [ $answer = "y" -o $answer = "Y" -o $answer = "n" -o $answer = "N" ]
      do
--- 376,382 ----
  
  if [ .$answer = . ]
  then
!     answer=y
  fi
      until [ $answer = "y" -o $answer = "Y" -o $answer = "n" -o $answer = "N" ]
      do
***************
*** 519,525 ****
  ** so RGB names can be looked up, but yet not allow users to make constant
  ** use of this very ineffiecient lookup.
  */
! #define RGB_MAPPING_DICT            "$BaseDir/rgb.txt"
  EOX
  
  cat<<EOXXX>>$ConfigH
--- 518,524 ----
  ** so RGB names can be looked up, but yet not allow users to make constant
  ** use of this very ineffiecient lookup.
  */
! #define RGB_MAPPING_DICT            "$LibDir/rgb.txt"
  EOX
  
  cat<<EOXXX>>$ConfigH
***************
*** 547,553 ****
  echo "LOG_DIR=\"$LogDir\"" >> $Tmpl
  echo "LOG_FILE=\"$LogFile\"" >> $Tmpl
  echo "RGB_FILE=\"$RgbFile\"" >> $Tmpl
! echo "RGB_DIR=\"$BaseDir\"" >> $Tmpl
  ##
  # create template for install program --ends
  ##
--- 546,552 ----
  echo "LOG_DIR=\"$LogDir\"" >> $Tmpl
  echo "LOG_FILE=\"$LogFile\"" >> $Tmpl
  echo "RGB_FILE=\"$RgbFile\"" >> $Tmpl
! echo "RGB_DIR=\"$LibDir\"" >> $Tmpl
  ##
  # create template for install program --ends
  ##
