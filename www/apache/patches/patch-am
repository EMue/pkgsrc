$NetBSD: patch-am,v 1.4 1999/11/27 22:52:09 rh Exp $

--- src/ap/ap_hook.c.orig	Sat Nov 27 23:46:41 1999
+++ src/ap/ap_hook.c	Sat Nov 27 23:46:43 1999
@@ -740,6 +740,15 @@
         *((int *)v_rc) = ((int(*)(void *, void *, void *, int, void *))(hf->hf_ptr))(v1, v2, v3, v4, v5);
         rc = (*((int *)v_rc) != he->he_modeval.v_int);
     }
+    else if (he->he_sig == AP_HOOK_SIG5(int, ptr, ptr, ptr, ptr)) {
+        /* Call: int func(ptr,ptr,ptr,ptr) */
+        void *v1 = va_arg(ap, va_type(ptr));
+        void *v2 = va_arg(ap, va_type(ptr));
+        void *v3 = va_arg(ap, va_type(ptr));
+        void *v4 = va_arg(ap, va_type(ptr));
+        *((int *)v_rc) = ((int(*)(void *, void *, void *, void *))(hf->hf_ptr))(v1, v2, v3, v4);
+        rc = (*((int *)v_rc) != he->he_modeval.v_int);
+    }
     else if (he->he_sig == AP_HOOK_SIG6(int, ptr, ptr, ptr, ptr, int)) {
         /* Call: int func(ptr,ptr,ptr,ptr,int) */
         void *v1 = va_arg(ap, va_type(ptr));
