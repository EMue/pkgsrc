$NetBSD: patch-ac,v 1.4 2001/03/26 14:23:05 simonb Exp $

--- src/LYCurses.c.orig	Tue Feb 27 13:41:57 2001
+++ src/LYCurses.c	Sun Mar 25 23:17:50 2001
@@ -1492,6 +1492,10 @@
 #endif /* FANCY_CURSES || USE_SLANG */
 }
 
+#ifdef HAVE_SYS_PARAM_H
+#include <sys/param.h>
+#endif
+
 /*
  * Accommodate the different flavors of touchline
  */
@@ -1502,11 +1506,17 @@
     wredrawln(LYwin, row, 1);
 #else
 #if defined(HAVE_TOUCHLINE)
-    /* touchline() is not available on VMS before version 7.0, and then only on
-     * Alpha, since prior ports of curses were broken.  BSD touchline() has a
-     * 4th parameter since it is used internally by touchwin().
+    /* touchline() is not available on VMS before version 7.0, and then
+     * only on Alpha, since prior ports of curses were broken. Traditional
+     * BSD touchline() had a 4th parameter which was used internally by
+     * touchwin(), but NetBSD dropped that in version 1.5 when it moved
+     * to a SysV-like curses.
      */
-    touchline(LYwin, row, 1, 0);
+#if defined(NCURSES) || (defined(__NetBSD_Version__) && __NetBSD_Version__ >= 104250000)
+    touchline(stdscr, row, 1);
+#else
+    touchline(stdscr, row, 1, 0);
+#endif
 #else
 #if !defined(USE_SLANG)
     touchwin(LYwin);
