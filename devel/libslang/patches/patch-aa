--- src/Makefile.in.orig	Wed Jul 15 09:23:28 1998
+++ src/Makefile.in	Wed Jul 15 09:45:35 1998
@@ -2,9 +2,9 @@
 #---------------------------------------------------------------------------
 # ANSI C compiler
 #---------------------------------------------------------------------------
-CC              = @CC@
-CFLAGS 		= @CFLAGS@
-LDFLAGS		= @LDFLAGS@
+CC		= ${LIBTOOL} cc
+CFLAGS		= -O2
+LDFLAGS		= libslang.la -ltermcap
 #---------------------------------------------------------------------------
 # ELF specific (Linux)
 #---------------------------------------------------------------------------
@@ -17,7 +17,7 @@
 # Set these values to ABSOLUTE path names
 #---------------------------------------------------------------------------
 SRCDIR = @SRCDIR@# Location of sources
-OBJDIR = @OBJDIR@# Location of objects
+OBJDIR = .# Location of objects
 ELFDIR = @ELFDIR@# Location of elf objects
 
 #---------------------------------------------------------------------------
@@ -57,13 +57,13 @@
 ELF_MINOR_VERSION	= @slang_minor_version@#
 
 CONFIG_H		= config.h
-ALL_CFLAGS		= $(CFLAGS) -Dunix $(THIS_LIB_DEFINES)
+CFLAGS			+= -Dunix $(THIS_LIB_DEFINES)
 ALL_ELF_CFLAGS		= $(ELF_CFLAGS) -Dunix $(THIS_LIB_DEFINES)
 COMPILE_CMD		= $(CC) -c $(ALL_CFLAGS)
 ELFCOMPILE_CMD		= $(ELF_CC) -c $(ALL_ELF_CFLAGS)
 ELF_LINK_CMD		= @ELF_LINK_CMD@
 
-NORMAL_LIB = lib$(THIS_LIB).a
+NORMAL_LIB = lib$(THIS_LIB).la
 OBJDIR_NORMAL_LIB = $(OBJDIR)/$(NORMAL_LIB)
 
 ELFLIB = lib$(THIS_LIB).so#
@@ -90,8 +90,8 @@
 
 $(OBJDIR_NORMAL_LIB): $(OBJDIR) $(CONFIG_H) $(OBJS)
 	-$(RM) $(OBJDIR_NORMAL_LIB)
-	cd $(OBJDIR); $(AR_CR) $(NORMAL_LIB) $(OFILES)
-	$(RANLIB) $(OBJDIR_NORMAL_LIB)
+	cd $(OBJDIR); $(LIBTOOL) --mode=link cc -o $(NORMAL_LIB) $(OFILES:.o=.lo) \
+		-rpath $(PREFIX)/lib -version-info 1:2
 	@echo ""
 	@echo $(NORMAL_LIB) created in $(OBJDIR)
 
@@ -115,9 +115,7 @@
 #---------------------------------------------------------------------------
 install: $(install_lib_dir) $(install_include_dir) $(OBJDIR_NORMAL_LIB)
 	@echo installing $(OBJDIR_NORMAL_LIB) in $(install_lib_dir)
-	$(INSTALL_DATA) $(OBJDIR_NORMAL_LIB) $(install_lib_dir)
-	$(RANLIB) $(install_lib_dir)/$(NORMAL_LIB)
-	chmod 644 $(install_lib_dir)/$(NORMAL_LIB)
+	$(LIBTOOL) --mode=install $(INSTALL_DATA) $(OBJDIR_NORMAL_LIB) $(install_lib_dir)
 	@echo installing slang.h and slcurses.h in $(install_include_dir)
 	$(INSTALL_DATA) $(SRCDIR)/slang.h $(install_include_dir)
 	$(INSTALL_DATA) $(SRCDIR)/slcurses.h $(install_include_dir)
