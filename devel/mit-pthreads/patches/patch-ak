$NetBSD: patch-ak,v 1.4 1999/04/08 20:08:56 bad Exp $

--- config/configure.in.orig	Wed Nov 13 22:03:08 1996
+++ config/configure.in	Thu Apr  8 21:53:21 1999
@@ -124,6 +124,23 @@
 name=$host_cpu-$host_os
 
 case $host in
+    alpha-*-netbsd1.4*) 
+	name=alpha-netbsd-1.4
+	sysincludes=netbsd-1.1
+	except="fork lseek pipe fstat"
+	available_syscalls="sigsuspend sigprocmask"
+	;;
+    alpha-*-netbsd1.3[H-Z]) 
+	name=alpha-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="fork lseek pipe fstat"
+	available_syscalls="sigsuspend sigprocmask"
+	;;
+    alpha-*-netbsd1.3*) 
+	name=alpha-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="fork lseek pipe sigsuspend sigprocmask fstat"
+	;;
     alpha-*-netbsd1.1* | alpha-*-netbsd1.2*)
 	name=alpha-netbsd-1.1
 	sysincludes=netbsd-1.1
@@ -137,6 +154,23 @@
 	  CFLAGS="$CFLAGS -std"
 	fi
 	;;
+    arm32-*-netbsd1.4*)
+	name=arm32-netbsd-1.4
+	sysincludes=netbsd-1.1
+	except="fork pipe lseek ftruncate fstat"
+	available_syscalls="sigsuspend sigprocmask"
+	;;
+    arm32-*-netbsd1.3[H-Z])
+	name=arm32-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="fork pipe lseek ftruncate fstat"
+	available_syscalls="sigsuspend sigprocmask"
+	;;
+    arm32-*-netbsd1.3*)
+	name=arm32-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="fork pipe lseek ftruncate sigsuspend sigprocmask fstat"
+	;;
     hppa1.1-*-hpux*)
 	name=hppa-hpux-9.03
 	sysincludes=hpux-9.03
@@ -158,6 +192,23 @@
 	AC_DEFINE(LD_LINKS_STATIC_DATA)
 	AC_DEFINE(BROKEN_SIGNALS)
 	;;
+    sparc-*-netbsd1.3*)
+	name=sparc-netbsd-1.4
+	sysincludes=netbsd-1.1
+	except="pipe fork lseek ftruncate fstat"
+	available_syscalls="sigprocmask sigsuspend"
+	;;
+    sparc-*-netbsd1.3[H-Z])
+	name=sparc-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="pipe fork lseek ftruncate fstat"
+	available_syscalls="sigprocmask sigsuspend"
+	;;
+    sparc-*-netbsd1.3*)
+	name=sparc-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="pipe fork lseek ftruncate sigprocmask sigsuspend fstat"
+	;;
 	sparc-*-netbsd1.0A | sparc-*-netbsd1.1* | sparc-*-netbsd1.2*)
     name=sparc-sunos-4.1.3
     sysincludes=netbsd-1.0
@@ -178,6 +229,23 @@
         syscall=i386-bsdi-2.0
         except="fork lseek sigsuspend"
 		;;
+    i386-*-netbsd1.4*)
+	name=i386-netbsd-1.4
+	sysincludes=netbsd-1.1
+	except="fork lseek ftruncate pipe fstat"
+	available_syscalls="sigsuspend sigprocmask"
+		;;
+    i386-*-netbsd1.3[H-Z])
+	name=i386-netbsd-1.3
+	sysincludes=netbsd-1.1
+	except="fork lseek ftruncate pipe fstat"
+	available_syscalls="sigsuspend sigprocmask"
+		;;
+    i386-*-netbsd1.3*)
+        name=i386-netbsd-1.3
+        sysincludes=netbsd-1.1
+        except="fork lseek ftruncate pipe sigsuspend sigprocmask fstat"
+		;;
     i386-*-netbsd1.1* | i386-*-netbsd1.2*)
 	name=i386-netbsd-1.0
 	sysincludes=netbsd-1.1
@@ -304,6 +372,16 @@
 AC_MSG_RESULT($pthreads_cv_timespec_in_time)
 if test $pthreads_cv_timespec_in_time = yes ; then
   AC_DEFINE(_OS_HAS_TIMESPEC)
+fi
+
+dnl	socklen_t
+AC_CACHE_VAL(pthreads_cv_socklen_t,
+  AC_TRY_COMPILE([#include <sys/types.h>
+#include <sys/socket.h>], [socklen_t foo;],
+	pthreads_cv_socklen_t=yes, pthreads_cv_socklen_t=no))
+AC_MSG_RESULT($pthreads_cv_socklen_t)
+if test $pthreads_cv_socklen_t = yes ; then
+  AC_DEFINE(_OS_HAS_SOCKLEN_T)
 fi
 
 
