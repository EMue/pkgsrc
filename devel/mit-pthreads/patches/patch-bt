$NetBSD: patch-bt,v 1.2 1999/12/28 05:08:11 wiz Exp $
diff -ur machdep/syscall-template-i386-netbsd-1.3.S machdep/syscall-template-i386-netbsd-1.3.S
--- machdep/syscall-template-i386-netbsd-1.3.S	Wed Nov  3 12:15:31 1999
+++ machdep/syscall-template-i386-netbsd-1.3.S	Wed Nov  3 19:28:47 1999
@@ -4,36 +4,33 @@
 #ifdef SYS___sigsuspend14
 #define SYS_sigsuspend SYS___sigsuspend14
 #endif
-#ifdef SYS___sigprocmask14
-#define SYS_sigprocmask SYS___sigprocmask14
+
+#ifdef SYS___sigaction14
+#define SYS_sigaction SYS___sigaction14
 #endif
 
-#ifdef __STDC__
+#ifdef SYS___sigpause14
+#define SYS_sigpause SYS___sigpause14
+#endif
 
-#define	SYSCALL(x)					\
-	.globl _machdep_sys_##x;		\
-									\
-_machdep_sys_##x:;					\
-									\
-	movl $(SYS_##x), %eax;			\
-	int $0x80;						\
-	jb	1b;							\
-	ret;							
-
-#else
-
-#define	SYSCALL(x)					\
-	.globl _machdep_sys_/**/x;		\
-									\
-_machdep_sys_/**/x:;				\
-									\
-	movl $(SYS_/**/x), %eax;		\
-	int $0x80;						\
-	jb	1b;							\
-	ret;							
+#ifdef SYS___sigprocmask14
+#define SYS_sigprocmask SYS___sigprocmask14
+#endif
 
+#ifdef SYS___vfork14xxxmlg
+#define SYS_vfork SYS___vfork14
 #endif
 
+/* XXXMLG What about sigantstack14 and sigreturn14? */
+
+#define	SYSCALL(x)					; \
+	.globl _C_LABEL(machdep_sys_##x)		; \
+							; \
+_C_LABEL(machdep_sys_##x):				; \
+	movl $(SYS_##x), %eax				; \
+	int $0x80					; \
+	jb	1b					; \
+	ret
 
 /*
  * Initial asm stuff for all functions.
