$NetBSD: patch-ac,v 1.2 2000/05/27 01:23:05 sommerfeld Exp $

--- libidu/scanners.c.orig	Wed Jul 17 17:45:52 1996
+++ libidu/scanners.c	Fri May 26 21:07:43 2000
@@ -65,8 +65,10 @@
 struct language languages_0[] =
 {
   { "C", parse_args_c, get_token_c, help_me_c },
+  { "C++", parse_args_c, get_token_c, help_me_c },
   { "asm", parse_args_asm, get_token_asm, help_me_asm },
   { "text", parse_args_text, get_token_text, help_me_text },
+  { "make", parse_args_text, get_token_text, help_me_text },
 };
 struct language const *languages_N = &languages_0[cardinalityof (languages_0)];
 
@@ -906,7 +908,7 @@
 	  || strequ (id_0, "define")
 	  || strequ (id_0, "undef"))
 	goto next;
-      while (c != '\n')
+      while ((c != '\n') && !ISEOF(c))
 	c = getc (in_FILE);
       new_line = 1;
       goto top;
