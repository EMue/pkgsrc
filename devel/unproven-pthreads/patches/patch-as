$NetBSD: patch-as,v 1.1 2001/04/12 07:53:18 skrll Exp $

--- machdep/syscall-sparc-netbsd-1.3.S.orig	Thu Apr 12 08:33:16 2001
+++ machdep/syscall-sparc-netbsd-1.3.S
@@ -10,10 +10,11 @@
 #endif
  
+#include <machine/asm.h>
 #include <sys/syscall.h>
 
 #define	SYSCALL(x)					\
-	.globl _machdep_sys_##x;		\
+	.globl _C_LABEL(machdep_sys_##x);		\
 									\
-_machdep_sys_##x:;					\
+_C_LABEL(machdep_sys_##x):;					\
 									\
 	mov SYS_##x, %g1;   			\
@@ -44,7 +45,7 @@
  * machdep_sys_pipe()
  */
-    .globl _machdep_sys_pipe
+    .globl _C_LABEL(machdep_sys_pipe)
 
-_machdep_sys_pipe:
+_C_LABEL(machdep_sys_pipe):
     mov  %o0, %o2
     mov  SYS_pipe, %g1
@@ -60,7 +61,7 @@
  * machdep_sys_fork()
  */
-    .globl _machdep_sys_fork;
+    .globl _C_LABEL(machdep_sys_fork);
 
-_machdep_sys_fork:;
+_C_LABEL(machdep_sys_fork):;
 
     mov SYS_fork, %g1;
@@ -76,7 +77,7 @@
  * machdep_sys_sigprocmask()
  */
-    .globl _machdep_sys_sigprocmask;
+    .globl _C_LABEL(machdep_sys_sigprocmask);
 
-_machdep_sys_sigprocmask:;
+_C_LABEL(machdep_sys_sigprocmask):;
 
 	ld [%o1], %o1; 
@@ -93,7 +94,7 @@
  * machdep_sys_sigsuspend()
  */
-    .globl _machdep_sys_sigsuspend;
+    .globl _C_LABEL(machdep_sys_sigsuspend);
 
-_machdep_sys_sigsuspend:;
+_C_LABEL(machdep_sys_sigsuspend):;
 
 	ld [%o0], %o0; 
@@ -109,7 +110,7 @@
  * machdep_sys_fstat()
  */
-    .globl _machdep_sys_fstat;
+    .globl _C_LABEL(machdep_sys_fstat);
 
-_machdep_sys_fstat:;
+_C_LABEL(machdep_sys_fstat):;
 
     mov SYS___fstat13, %g1;
@@ -123,5 +124,5 @@
  * machdep_sys___syscall()
  */
-_machdep_sys___syscall:;
+_C_LABEL(machdep_sys___syscall):;
 
     mov SYS___syscall, %g1;
@@ -135,7 +136,7 @@
  * machdep_sys_lseek()
  */
-	.global _machdep_sys_lseek
+	.global _C_LABEL(machdep_sys_lseek)
 
-_machdep_sys_lseek:
+_C_LABEL(machdep_sys_lseek):
 	save %sp,-112,%sp
 	mov %i1,%o4
@@ -145,5 +146,5 @@
 	mov SYS_lseek,%o1
 	mov %i0,%o2
-	call _machdep_sys___syscall,0
+	call _C_LABEL(machdep_sys___syscall),0
 	mov 0,%o3
 	mov %o0,%i0
@@ -155,7 +156,7 @@
  * machdep_sys_ftruncate()
  */
-	.global _machdep_sys_ftruncate
+	.global _C_LABEL(machdep_sys_ftruncate)
 
-_machdep_sys_ftruncate:
+_C_LABEL(machdep_sys_ftruncate):
 	save %sp,-104,%sp
 	mov %i1,%o4
@@ -164,5 +165,5 @@
 	mov SYS_ftruncate,%o1
 	mov %i0,%o2
-	call _machdep_sys___syscall,0
+	call _C_LABEL(machdep_sys___syscall),0
 	mov 0,%o3
 	mov %o0,%o1
