$NetBSD: patch-ab,v 1.3 2001/04/23 17:33:06 wulf Exp $ 

--- as/mcs51/i51mch.c.orig	Mon Apr  9 20:19:02 2001
+++ as/mcs51/i51mch.c	Mon Apr  9 20:20:44 2001
@@ -424,7 +424,7 @@
 			v1 = -3;
 		    else
 			v1 = e1.e_addr - dot.s_addr - 1;
-			if ((v1 < -128) || (v1 > 127))
+			if (((v1 < -128) || (v1 > 127)) && pass > 0)
 				aerr();
 			outab(v1);
 		} else {
@@ -443,7 +443,7 @@
 			v1 = -2;
 		    else   
 			v1 = e1.e_addr - dot.s_addr - 1;
-			if ((v1 < -128) || (v1 > 127))
+			if (((v1 < -128) || (v1 > 127)) && pass > 0)
 				aerr();
 			outab(v1);
 		} else {
@@ -498,7 +498,7 @@
 			v1 = -3;
 		    else   
 			v1 = e1.e_addr - dot.s_addr - 1;
-			if ((v1 < -128) || (v1 > 127))
+			if (((v1 < -128) || (v1 > 127)) && pass > 0)
 				aerr();
 			outab(v1);
 		} else {
@@ -535,7 +535,7 @@
 			v1 = -2;
 		    else   
 			v1 = e1.e_addr - dot.s_addr - 1;
-			if ((v1 < -128) || (v1 > 127))
+			if (((v1 < -128) || (v1 > 127)) && pass > 0)
 				aerr();
 			outab(v1);
 		} else {
