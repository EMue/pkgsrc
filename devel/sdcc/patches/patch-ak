$NetBSD: patch-ak,v 1.1 2000/08/25 21:49:29 tron Exp $

--- sdcc.src/SDCCval.c.orig	Fri Sep 10 15:35:45 1999
+++ sdcc.src/SDCCval.c	Fri Aug 25 23:17:26 2000
@@ -578,7 +578,7 @@
 /*------------------------------------------------------------------*/
 /* floatFromVal - value to unsinged integer conversion		    */
 /*------------------------------------------------------------------*/
-double   floatFromVal ( value *val )
+long   floatFromVal ( value *val )
 {
     if (!val)
 	return 0;
@@ -591,22 +591,22 @@
     /* if it is not a specifier then we can assume that */
     /* it will be an unsigned long                      */
     if (!IS_SPEC(val->type))
-	return (double) SPEC_CVAL(val->etype).v_ulong;
+	return (long) SPEC_CVAL(val->etype).v_ulong;
 
     if (SPEC_NOUN(val->etype) == V_FLOAT )
-	return (double) SPEC_CVAL(val->etype).v_float ;
+	return (long) SPEC_CVAL(val->etype).v_float ;
     else {
 	if (SPEC_LONG(val->etype)) {
 	    if (SPEC_USIGN(val->etype))
-		return (double) SPEC_CVAL(val->etype).v_ulong ;
+		return (long) SPEC_CVAL(val->etype).v_ulong ;
 	    else
-		return (double) SPEC_CVAL(val->etype).v_long  ;
+		return (long) SPEC_CVAL(val->etype).v_long  ;
 	}
 	else {
 	    if (SPEC_USIGN(val->etype))
-		return (double) SPEC_CVAL(val->etype).v_uint ;
+		return (long) SPEC_CVAL(val->etype).v_uint ;
 	    else
-		return (double) SPEC_CVAL(val->etype).v_int  ;
+		return (long) SPEC_CVAL(val->etype).v_int  ;
 	}
     }
 }
