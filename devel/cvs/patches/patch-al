$NetBSD: patch-al,v 1.3 2000/02/23 06:48:56 mycroft Exp $

--- src/client.c.orig	Sun Jul 26 22:54:06 1998
+++ src/client.c	Wed Feb 23 01:23:49 2000
@@ -1777,7 +1777,8 @@
 		run_arg ("~");
 		run_arg (filename);
 		run_arg (temp_filename);
-		retcode = run_exec (DEVNULL, RUN_TTY, RUN_TTY, RUN_NORMAL);
+		retcode = run_exec (DEVNULL, RUN_TTY, RUN_TTY,
+				    RUN_NORMAL | RUN_UNSETXID);
 	    }
 	    /* FIXME: should we really be silently ignoring errors?  */
 	    (void) unlink_file (temp_filename);
@@ -4171,6 +4172,16 @@
 	    else
 		error (1, 0,
 		       "This server does not support the global -n option.");
+	}
+	if (nolock && !noexec)
+	{
+	    if (have_global)
+	    {
+		send_to_server ("Global_option -u\012", 0);
+	    }
+	    else
+		error (1, 0,
+		       "This server does not support the global -u option.");
 	}
 	if (quiet)
 	{
