$NetBSD: patch-aa,v 1.4 1998/08/07 10:40:25 agc Exp $

--- ltconfig.orig	Fri Mar 20 03:00:29 1998
+++ ltconfig	Sun Jul 12 22:48:41 1998
@@ -808,7 +808,11 @@
 
   netbsd*)
     # Tested with NetBSD 1.2 ld
-    archive_cmds='$LD -Bshareable -o $lib$libobjs'
+    if [ -f /usr/lib/libc.so ]; then
+      archive_cmds='$LD -shared -o $lib$libobjs'	# ELF
+    else
+      archive_cmds='$LD -Bshareable -o $lib$libobjs'	# a.out
+    fi
     hardcode_libdir_flag_spec='-R$libdir'
     hardcode_direct=yes
     hardcode_shlibpath_var=no
@@ -1181,8 +1185,13 @@
 
 netbsd* | openbsd*)
   version_type=sunos
-  library_names_spec='${libname}${release}.so.$versuffix'
-  finish_cmds='PATH="$PATH:/sbin" ldconfig -m $libdir'
+  if [ -f /usr/lib/libc.so ]; then
+    library_names_spec='${libname}${release}.so.$versuffix ${libname}${release}.so.$major ${libname}${release}.so'
+    soname_spec='${libname}${release}.so.$major'
+  else
+    library_names_spec='${libname}${release}.so.$versuffix'
+    finish_cmds='PATH="$PATH:/sbin" ldconfig -m $libdir'
+  fi
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
