$NetBSD: patch-ac,v 1.6 2000/08/28 19:52:35 dmcmahill Exp $

--- vipec/Makefile.in.orig	Mon May 22 16:11:40 2000
+++ vipec/Makefile.in	Mon Aug 28 14:11:06 2000
@@ -194,5 +194,5 @@
 bin_PROGRAMS = vipec
 vipec_SOURCES = helpwindow.cpp vipec.cpp view.cpp vector.cpp utils.cpp twoports.cpp table.cpp smith.cpp smallmatrix.cpp setup.cpp parser.cpp paramset.cpp netanal.cpp matrix.cpp main.cpp graphutils.cpp graph.cpp drawingframe.cpp convert.cpp config.cpp circuiteditor.cpp block.cpp analyser.cpp 
-vipec_LDADD = -lqt -lXext -lX11 $(LIBSOCKET)
+vipec_LDADD = -lqt -lXext -lX11  -lz -lpng -ljpeg -lSM -lICE $(LIBSOCKET)
 
 SUBDIRS = images ckt help 
@@ -246,4 +246,5 @@
 #>+ 1
 CXXCOMPILE = $(CXX) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS) $(KDE_CXXFLAGS)
+CXXCOMPILE2 = $(CXX) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS)  $(KDE_CXXFLAGS)
 #>- LTCXXCOMPILE = $(LIBTOOL) --mode=compile $(CXX) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 #>+ 1
@@ -262,4 +263,11 @@
 SOURCES = $(vipec_SOURCES)
 OBJECTS = $(vipec_OBJECTS)
+
+# avoid a bug with "c++ -O*" on some machines.  This is noted with
+# gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)
+.if (${MACHINE_ARCH} == "mipsel")
+analyser.o: analyser.cpp
+	$(CXXCOMPILE2) -c analyser.cpp
+.endif 
 
 all: all-redirect
