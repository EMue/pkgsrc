$NetBSD: patch-ad,v 1.2 2000/09/26 02:02:33 hubertf Exp $

--- configure.orig	Sat Jun  6 14:19:03 1998
+++ configure
@@ -553,7 +553,10 @@
 # determine the kind of the machine which is running this script
 os=`uname -s`
 version=`uname -r`
-machine=`uname -m`
+# NetBSD:
+# allow sharing between different arch's which use the same processor
+# Ie, use 'm68k' instead of 'amiga', 'mac68k', 'hp300', etc.
+machine=`uname -p`
 
 case $os in
   Linux*) 
@@ -969,7 +972,7 @@
   # just checking for Solaris.
   # It would also be nice to do this for all -L options, not just this one.
   if test -n "$x_libraries"; then
-    X_LIBS="$X_LIBS -L$x_libraries"
+    X_LIBS="$X_LIBS -Wl,-R$x_libraries -L$x_libraries"
     if test "`(uname) 2>/dev/null`" = SunOS &&
       uname -r | grep '^5' >/dev/null; then
       X_LIBS="$X_LIBS -R $x_libraries"
@@ -979,7 +982,7 @@
   # Check for libraries that X11R6 Xt/Xaw programs need.
 
   ac_save_LDFLAGS="$LDFLAGS"
-  LDFLAGS="$LDFLAGS -L$x_libraries"
+  LDFLAGS="$LDFLAGS -Wl,-R$x_libraries -L$x_libraries"
   # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
   # check for ICE first), but we must link in the order -lSM -lICE or
   # we get undefined symbols.  So assume we have SM if we have ICE.
@@ -1193,7 +1196,7 @@
 
 if test "$x_libraries" != ""
 then
-   XLIBSW="-L$x_libraries"
+   XLIBSW="-Wl,-R$x_libraries -L$x_libraries"
 fi
 
 XLIBSW="$XLIBSW $X_PRE_LIBS -lX11 $X_EXTRA_LIBS"
