$NetBSD: patch-ad,v 1.1 2000/01/22 13:31:46 itojun Exp $

--- ext/socket/extconf.rb-	Thu Jan 20 02:50:06 2000
+++ ext/socket/extconf.rb	Thu Jan 20 02:52:52 2000
@@ -41,6 +41,7 @@
 $ipv6type = nil
 $ipv6lib = nil
 $ipv6libdir = nil
+$ipv6trylibc = nil
 if $ipv6
   if egrep_cpp("yes", <<EOF)
 #include <netinet/in.h>
@@ -59,6 +60,7 @@
     $ipv6type = "kame"
     $ipv6lib="inet6"
     $ipv6libdir="/usr/local/v6/lib"
+    $ipv6trylibc=true
     $CFLAGS="-DINET6 "+$CFLAGS
   elsif File.directory? "/usr/inet6"
     $ipv6type = "linux"
@@ -100,7 +102,7 @@
   if $ipv6lib
     if File.directory? $ipv6libdir and File.exist? "#{$ipv6libdir}/lib#{$ipv6lib}.a"
       $LOCAL_LIBS = " -L#$ipv6libdir -l#$ipv6lib"
-    else
+    elsif !$ipv6trylibc
       print <<EOS
 
 Fatal: no #$ipv6lib library found.  cannot continue.
