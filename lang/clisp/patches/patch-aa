$NetBSD: patch-aa,v 1.5 1999/07/21 23:25:08 mjl Exp $

--- makemake.in.orig	Thu Jan  7 16:23:48 1999
+++ makemake.in	Wed Jul 21 20:07:38 1999
@@ -280,7 +280,7 @@
      LIBTERMCAP='@LIBTERMCAP@'           # either '-ltermcap' or '-lncurses'
      LIBDL='@LIBDL@'                     # either '-ldl' or ''
      X_INCLUDES='@X_INCLUDES@'           # either '-I/usr/somewhere/include' or ''
-     X_LIBS='@X_LIBS@'                   # either '-L/usr/somewhere/lib -lX11' or ''
+     X_LIBS='-Wl,-rpath ${X11BASE}/lib @X_LIBS@'                   # either '-L/usr/somewhere/lib -lX11' or ''
      host='@host@'                       # something like 'sparc-sun-sunos4'
      host_cpu='@host_cpu@'               # something like 'sparc'
      host_vendor='@host_vendor@'         # something like 'sun'
@@ -1056,6 +1056,9 @@
     *) ;;
   esac
 fi
+if [ "$TSYSOS" = "netbsd" ] ; then # NetBSD
+      XCFLAGS=$XCFLAGS' -DNO_GENERATIONAL_GC -fpcc-struct-return -Dunix'
+fi     
 
 if [ $TSYS = sun4 -a $CROSS = false ] ; then
   ARCH_K=`(arch -k) 2>/dev/null || uname -m 2>/dev/null` # kernel architecture, see arch(1)
@@ -2380,7 +2383,7 @@
   if [ $HOS = unix ] ; then
     echotab "if test -d locale; then rm -rf locale; fi"
     echotab "mkdir locale"
-    echotab "(cd gettext/po && \$(MAKE) && \$(MAKE) install datadir=../.. localedir='\$\$(datadir)/locale' INSTALL_DATA=ln) || (rm -rf locale ; exit 1)"
+    echotab "(cd gettext/po && \$(MAKE) && \$(MAKE) install datadir=../.. localedir='\$\$(datadir)/locale' INSTALL_DATA=\"ln -f\") || (rm -rf locale ; exit 1)"
   else
     echotab "mkdir locale"
     eval `grep ALL_LINGUAS= src/gettext/configure.in`
@@ -2919,7 +2922,7 @@
     fi
     case "$fsstnd" in
       gnu_ext)
-        echotab "if [ ! -d \$(mandir)/html ] ; then mkdir \$(mandir)/html ; fi"
+        echotab "if [ ! -d \$(prefix)/share/doc/clisp ] ; then mkdir \$(prefix)/share/doc/clisp ; fi"
         ;;
       suse | redhat | debian)
         echotab "if [ ! -d \$(docdir) ] ; then mkdir \$(docdir) ; fi"
@@ -2977,10 +2980,10 @@
     fi
     case "$fsstnd" in
       gnu_ext)
-        echotab "if [ ! -d \$(mandir)/html ] ; then mkdir \$(mandir)/html ; fi"
-        echotab "\$(INSTALL_DATA) clisp.html \$(mandir)/html/clisp.html"
+        echotab "if [ ! -d \$(prefix)/share/doc/clisp ] ; then mkdir \$(prefix)/share/doc/clisp ; fi"
+        echotab "\$(INSTALL_DATA) clisp.html \$(prefix)/share/doc/clisp/clisp.html"
         if [ $TERMINAL = readline ] ; then
-          echotab "\$(INSTALL_DATA) clreadline.html \$(mandir)/html/clreadline.html"
+          echotab "\$(INSTALL_DATA) clreadline.html \$(prefix)/share/doc/clisp/clreadline.html"
         fi
         ;;
       suse | redhat | debian)
@@ -3016,9 +3019,9 @@
     fi
     case "$fsstnd" in
       gnu_ext)
-        echotab "\$(RM) \$(mandir)/html/clisp.html"
+        echotab "\$(RM) \$(prefix)/share/doc/clisp/clisp.html"
         if [ $TERMINAL = readline ] ; then
-          echotab "\$(RM) \$(mandir)/html/clreadline.html"
+          echotab "\$(RM) \$(prefix)/share/doc/clisp/clreadline.html"
         fi
         ;;
       suse | redhat | debian)
