$NetBSD: patch-ag,v 1.3 1999/09/06 03:54:34 kim Exp $

--- doio.c.orig	Mon Jul 28 21:08:11 1997
+++ doio.c	Sun Sep  5 23:27:54 1999
@@ -1333,7 +1333,7 @@
     char *a;
     I32 id, n, cmd, infosize, getinfo;
     I32 ret = -1;
-#ifdef __linux__	/* XXX Need metaconfig test */
+#if defined(__linux__) || (defined(__NetBSD__) && (__NetBSD_Version__ < 104110000))	/* XXX Need metaconfig test */
     union semun unsemds;
 #endif
 
@@ -1365,7 +1365,7 @@
 	else if (cmd == GETALL || cmd == SETALL)
 	{
 	    struct semid_ds semds;
-#ifdef __linux__	/* XXX Need metaconfig test */
+#if defined(__linux__) || (defined(__NetBSD__) && (__NetBSD_Version__ < 104110000))	/* XXX Need metaconfig test */
 /* linux (and Solaris2?) uses :
    int semctl (int semid, int semnum, int cmd, union semun arg)
        union semun {
@@ -1425,7 +1425,7 @@
 #endif
 #ifdef HAS_SEM
     case OP_SEMCTL:
-#ifdef __linux__	/* XXX Need metaconfig test */
+#if defined(__linux__) || (defined(__NetBSD__) && (__NetBSD_Version__ < 104110000))	/* XXX Need metaconfig test */
         unsemds.buf = (struct semid_ds *)a;
 	ret = semctl(id, n, cmd, unsemds);
 #else
