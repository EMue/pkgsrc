$NetBSD: patch-ab,v 1.8 2000/06/21 16:23:24 hubertf Exp $

--- configure.orig	Tue Mar  9 07:51:26 1999
+++ configure	Wed Jun 21 18:01:00 2000
@@ -4096,7 +4096,7 @@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-	    SHLIB_CFLAGS="-fpic"
+	    SHLIB_CFLAGS="-fPIC"
 	    SHLIB_LD="ld -Bshareable -x"
 	    SHLIB_LD_LIBS=""
 	    SHLIB_SUFFIX=".so"
@@ -4224,7 +4224,7 @@
 	TCL_LIB_VERSIONS_OK=nodots
 	;;
     SunOS-5*)
-	SHLIB_CFLAGS="-KPIC"
+	SHLIB_CFLAGS="-fPIC"
 	SHLIB_LD="/usr/ccs/bin/ld -G -z text"
 
 	# Note: need the LIBS below, otherwise Tk won't find Tcl's
@@ -4236,6 +4236,9 @@
 	DL_LIBS="-ldl"
 	LD_FLAGS=""
 	LD_SEARCH_FLAGS='-R ${LIB_RUNTIME_DIR}'
+	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+	    TCL_UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
+	TCL_LIB_VERSIONS_OK=nodots
 	;;
     ULTRIX-4.*)
 	SHLIB_CFLAGS="-G 0"
@@ -4680,6 +4683,8 @@
     MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}"
 fi
 
+TCL_SHARED_BUILD=1
+
 # Note:  in the following variable, it's important to use the absolute
 # path name of the Tcl directory rather than "..":  this is because
 # AIX remembers this path and will attempt to use it at run-time to look
@@ -4690,8 +4695,8 @@
 else
     TCL_LIB_FLAG="-ltcl`echo ${TCL_VERSION} | tr -d .`\${TCL_DBGX}"
 fi
-TCL_BUILD_LIB_SPEC="-L`pwd` ${TCL_LIB_FLAG}"
-TCL_LIB_SPEC="-L${exec_prefix}/lib ${TCL_LIB_FLAG}"
+TCL_BUILD_LIB_SPEC="-Wl,-R`pwd` -L`pwd` ${TCL_LIB_FLAG}"
+TCL_LIB_SPEC="-Wl,-R${exec_prefix}/lib -L${exec_prefix}/lib ${TCL_LIB_FLAG}"
 
 # tclConfig.sh needs a version of the _LIB_SUFFIX that has been eval'ed
 # so that the backslashes quoting the DBX braces are dropped.
